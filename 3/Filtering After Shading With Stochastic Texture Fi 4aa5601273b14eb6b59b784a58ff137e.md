# Filtering After Shading With Stochastic Texture Filtering

[https://research.nvidia.com/labs/rtr/publication/pharr2024stochtex/stochtex.pdf](https://research.nvidia.com/labs/rtr/publication/pharr2024stochtex/stochtex.pdf)

## **1 INTRODUCTION**

이미지 텍스처 맵은 대부분의 렌더링된 이미지에서 풍부한 표면 디테일을 구현하는 데 중요한 역할을 합니다. 텍스처 페인팅 도구의 발전은 아티스트들이 소재의 외관을 정밀하고 자연스럽게 제어할 수 있게 해줍니다. 구름, 연기, 불과 같은 볼륨 효과를 위한 3차원 복셀 그리드도 마찬가지로 중요한 역할을 하며, 정밀한 오프라인 물리 시뮬레이션을 가능하게 합니다. 이러한 텍스처와 복셀 그리드의 수와 해상도는 시간이 지남에 따라 꾸준히 증가해왔습니다.

렌더링의 일반적인 관행은 셰이딩 매개변수 값을 찾기 위해 필터링된 텍스처 조회를 수행하는 것입니다. 우리는 이러한 매개변수가 최종 결과에 비선형적으로 기여하는 경우, 셰이딩 전에 필터링하는 것이 오류를 유발한다는 것을 보여줍니다. 이러한 경우에는 셰이딩 후에 텍스처 필터를 적용하는 것이 더 정확한 결과를 제공합니다. 그러나 셰이딩 후 필터링을 단순히 구현하면 계산 비용이 증가합니다. 효율적인 확률적 텍스처 필터링 알고리즘을 사용하면, 각 텍스처 맵 조회에서 단일 텍셀 접근만으로도 효율적으로 셰이딩 후 필터링을 수행할 수 있습니다.

확률적 텍스처 필터링은 성능과 필터링 품질 측면에서 다른 이점도 제공합니다. 특히 하드웨어 가속 필터링과 호환되지 않으며, 계산 비용이 많이 드는 텍스처 접근을 필요로 하는 UDIM의 적응 타일링, 다중 레벨 희소 그리드, 신경망 표현과 같은 커스텀 표현으로 저장된 텍스처에 유리합니다.

![경로 추적으로 렌더링된 Disney Cloud의 한 섹션. 삼중선형 필터링은 이미지에 블록 같은 아티팩트를 유발합니다. 삼중 입방체 필터링(Tricubic filterin)은 훨씬 나은 결과를 제공하지만, 각 필터링된 값을 계산하기 위해 64개의 복셀 조회가 필요합니다. 확률적 필터링(Stochastic filtering)은 단일 복셀 조회만 수행하지만, 구별할 수 없는 결과를 제공하며, 삼중선형 필터와 삼중 입방체 필터의 렌더링 시간은 각각 1.60배, 2.77배 단축됩니다. 보고된 시간은 1080p 해상도에서 픽셀당 256개의 샘플로 pbrt-v4가 NVIDIA 4090 RTX GPU에서 실행되는 시간입니다.](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled.png)

경로 추적으로 렌더링된 Disney Cloud의 한 섹션. 삼중선형 필터링은 이미지에 블록 같은 아티팩트를 유발합니다. 삼중 입방체 필터링(Tricubic filterin)은 훨씬 나은 결과를 제공하지만, 각 필터링된 값을 계산하기 위해 64개의 복셀 조회가 필요합니다. 확률적 필터링(Stochastic filtering)은 단일 복셀 조회만 수행하지만, 구별할 수 없는 결과를 제공하며, 삼중선형 필터와 삼중 입방체 필터의 렌더링 시간은 각각 1.60배, 2.77배 단축됩니다. 보고된 시간은 1080p 해상도에서 픽셀당 256개의 샘플로 pbrt-v4가 NVIDIA 4090 RTX GPU에서 실행되는 시간입니다.

확률적 텍스처 필터링의 아이디어는 이미 문헌에서 제시되고 생산에 사용되어 왔지만, 그 방법의 종합적이거나 공식적인 개요나 장단점에 대한 분석은 거의 없습니다. 우리의 기여는 다음과 같습니다:

- 확률적 텍스처 필터링을 사용하여 텍스처 데이터를 셰이딩 전에 필터링하는 대신 셰이딩 후에 필터링함으로써, 특히 축소 시 더 정확하고 외관을 유지하는 결과를 얻을 수 있음을 보여줍니다.
- 텍스처를 확률적으로 필터링하는 두 가지 방법을 설명하고, 이론적 및 실제적 차이를 논의하며 기존 연구와 연결합니다.
- 실시간 렌더링에서 확률적 필터링으로 인해 추가된 노이즈가 시공간 재구성 알고리즘과 블루 노이즈 샘플링 패턴을 사용하여 효과적으로 억제될 수 있음을 보여줍니다. 오프라인 렌더링에서는 중간 정도의 픽셀 샘플링 속도로도 노이즈를 잘 처리할 수 있음을 보여줍니다.
- 마지막으로, 확률적 텍스처 필터링이 삼선형 필터링보다 낮은 비용으로 고품질 텍스처 필터를 사용할 수 있게 하여 이미지 품질을 더욱 향상시킬 수 있음을 보여줍니다.

## **2 BACKGROUND AND PREVIOUS WORK**

이미지 텍스처의 사용은 렌더링 분야에서 오랜 역사를 가지고 있습니다. 초기 연구로는 Blinn과 Newell, 그리고 Catmull의 연구가 있으며, Heckbert의 설문 논문에서 이 분야의 초기 연구를 포괄적으로 다루고 있습니다. 현대적 접근법으로는 Nehab과 Hoppe가 텍스처 보간 및 사전 필터링에 관한 연구를 발표하여 다양한 사전 필터에 대한 확장을 제시했습니다.

몬테카를로 샘플링을 통한 확률적 추정은 오늘날 대부분의 렌더링 접근법의 기초가 되었습니다. 10년 이상 동안 생산 렌더링에서는 경로 추적을 수용해왔으며, 실시간 렌더링에서도 경로 추적을 점점 더 많이 채택하고 있습니다. 비록 조명 적분은 확률적으로 평가되지만, 적분 함수는 일반적으로 분석적으로 평가됩니다. 스스로 확률적인 적분 함수는 복잡한 BSDF 모델, 다중 로브 BSDF 평가, 다수의 조명 샘플링을 위해 사용되었습니다.

실시간 렌더링에서는 확률적 접근법을 받아들여 확률적 텍스처링을 포함합니다. UV 지터링 및 최근접 이웃 필터링을 사용하는 대안 방법은 1990년대 비디오 게임 'Star Trek: 25th Anniversary'와 원래의 'Unreal Engine'에서 시작되었습니다. 현대적 예로는 확률적 알파 테스트, 반사 필터링, 레이 트레이스된 앰비언트 오클루젼이 있으며, 이러한 접근법을 가능하게 하는 주요 기술로는 시간적 안티앨리어싱(TAA)와 시간적 초해상도(TSS)가 있습니다. 두 기술 모두 적응형 히스토리 수정 및 거부와 함께 재귀 필터와 지수 이동 평균을 기반으로 합니다. 부정적인 MIP 바이어싱은 화면 공간 지터링과 함께 사용되어 더 선명한 이미지와 근사 이방성 필터링을 제공합니다.

우리의 연구 동기에는 Hofmann et al.와 Vaidyanathan et al.이 소개한 확률적 필터링 알고리즘이 포함됩니다. 이들은 성능 향상을 위해 확률적 삼중선형 필터링을 사용하여 픽셀당 비싼 압축 해제 알고리즘을 여러 번 평가하는 것을 피함으로써 상당한 속도 향상을 보여주었습니다. OpenImageIO 라이브러리 또한 MIP 레벨과 이방성 샘플의 확률적 샘플링을 지원하며, Lee et al.은 필터된 텍스처 조회를 최근접 포인트 샘플로 대체하여 영화 제작에서 일반적인 높은 샘플링 비율을 사용하여 텍스처 앨리어싱을 피했습니다. 우리는 이러한 결과를 확장하여 확률적 텍스처 필터링의 효과를 분석하고 더 넓은 범위의 텍스처 필터를 사용하는 방법을 보여줍니다.

렌더링 비선형성 이후 필터링 적용은 '미리 곱한 알파' 개념에서 유래할 수 있으며, 알파 미리 곱하기는 알파 컴포지티드 텍스처의 확대 및 필터링 동안 말도 안 되는 보간 값을 피할 수 있게 합니다. Reeves et al.의 그림자 맵 필터링에 관한 선구적 연구는 필터링을 셰이딩 전과 후로 명확히 구분한 최초의 연구였습니다. 그들의 퍼센티지 클로저 필터링 알고리즘은 깊이 대신 이진 가시성을 필터링하는 데 기반을 두고 있습니다. 우리는 이 접근법이 렌더링의 다른 측면에 어떻게 적용되는지 논의하고, 필터링과 셰이딩 순서 변경의 효과를 분석합니다.

## **3 TEXTURE FILTERING AND RENDERING**

현재 렌더링 관행에서는 텍스처를 필터링한 후에 조명을 계산하는 방식이 일반적입니다. 하지만 셰이딩 전에 텍스처를 필터링하는 것과 셰이딩 후에 텍스처를 필터링하는 것의 차이를 명확히 이해하고자 합니다. 텍스처 맵이 조명 모델의 BSDF(Bidirectional Scattering Distribution Function)에 비선형적으로 기여하는 경우, 셰이딩 후에 텍스처를 필터링하는 것이 보다 정확한 결과를 제공할 수 있습니다.

![축소된 상태에서 법선 맵핑된 재질의 외관. 셰이딩 전에 필터링하면 표면 법선을 잘못 필터링하지만, 셰이딩 후 필터링은 재질의 외관을 더 정확하게 재구성합니다.](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%201.png)

축소된 상태에서 법선 맵핑된 재질의 외관. 셰이딩 전에 필터링하면 표면 법선을 잘못 필터링하지만, 셰이딩 후 필터링은 재질의 외관을 더 정확하게 재구성합니다.

![ (a) 거의 90도 차이가 나는 두 개의 텍셀 법선. (b) 이중선형 필터링을 사용하면 법선이 부드럽게 분포됩니다. (c) 셰이딩 후 필터링은 항상 이미지에서 단일 텍셀 값을 사용하여 이 경우 두 개의 이산 법선을 필터링합니다.](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%202.png)

 (a) 거의 90도 차이가 나는 두 개의 텍셀 법선. (b) 이중선형 필터링을 사용하면 법선이 부드럽게 분포됩니다. (c) 셰이딩 후 필터링은 항상 이미지에서 단일 텍셀 값을 사용하여 이 경우 두 개의 이산 법선을 필터링합니다.

텍스처 필터링의 전통적인 방법은 조명 적분을 계산할 때 텍스처 데이터를 필터링하는 것입니다. 이 방식에서는 텍스처 데이터가 미리 정의된 재구성 필터와 저역통과 필터를 통해 필터링됩니다. 이러한 필터링은 텍스처의 선형적 기여에 대해서는 정확한 결과를 제공할 수 있지만, 텍스처가 비선형적으로 기여하는 경우에는 오류를 초래할 수 있습니다.

셰이딩 후 필터링 접근법을 통해 이러한 오류를 줄일 수 있습니다. 이는 텍스처 필터를 조명 적분 계산 후에 적용하여 더 정확한 결과를 얻을 수 있습니다. 예를 들어, 법선 맵이나 비선형 물리적 특성을 가진 텍스처의 경우, 셰이딩 후 필터링은 더 정확한 결과를 제공하며, 이는 특히 텍스처의 축소 시에 유용합니다.

![확대된 법선 맵핑된 스펙큘러 표면. (a) 전통적인 필터링. (b) 셰이딩 후 필터링(식 10 사용)은 앨리어싱을 유발합니다.](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%203.png)

확대된 법선 맵핑된 스펙큘러 표면. (a) 전통적인 필터링. (b) 셰이딩 후 필터링(식 10 사용)은 앨리어싱을 유발합니다.

![(a) 전통적인 접근 방식은 먼저 필터링을 수행한 후 Planck의 법칙을 사용하여 체적 방사 스펙트럼을 계산합니다. 반면, (b) 셰이딩 후 필터링은 Planck의 법칙에 따라 방사 스펙트럼을 필터링합니다. Planck의 법칙이 매우 비선형적이므로 결과가 다릅니다. 축소 시 (c) MIP 맵핑은 비선형 양에 대해 선형 필터링을 적용하여 오류를 유발합니다. 셰이딩 후 필터링과 MIP 맵을 사용하지 않으면 (d) 외관이 정확하게 유지됩니다.](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%204.png)

(a) 전통적인 접근 방식은 먼저 필터링을 수행한 후 Planck의 법칙을 사용하여 체적 방사 스펙트럼을 계산합니다. 반면, (b) 셰이딩 후 필터링은 Planck의 법칙에 따라 방사 스펙트럼을 필터링합니다. Planck의 법칙이 매우 비선형적이므로 결과가 다릅니다. 축소 시 (c) MIP 맵핑은 비선형 양에 대해 선형 필터링을 적용하여 오류를 유발합니다. 셰이딩 후 필터링과 MIP 맵을 사용하지 않으면 (d) 외관이 정확하게 유지됩니다.

셰이딩 후 필터링의 구현은 계산 비용이 많이 들 수 있습니다. 따라서 우리는 확률적 샘플링 기법을 사용하여 이러한 비용을 줄이고자 합니다. 이러한 접근법은 텍스처 필터링의 계산을 효율적으로 수행할 수 있게 해줍니다. 스토캐스틱 샘플링 기법을 사용하여 텍스처 필터링 후 셰이딩을 수행하면, 저역통과 필터링과 재구성 필터링을 결합하여 보다 정확한 결과를 제공할 수 있습니다.

비선형성으로 인해 필터링 후 셰이딩이 보다 정확한 결과를 제공할 수 있는 몇 가지 사례를 살펴보겠습니다. 법선 맵의 경우, 선형 필터링은 법선 값의 평균을 계산하여 외관을 변화시키지만, 셰이딩 후 필터링은 법선 맵의 디테일을 보존합니다. 또한, 물리적 특성이 비선형인 경우에도 셰이딩 후 필터링이 더 정확한 결과를 제공합니다. 예를 들어, 온도 값을 이용해 방사 스펙트럼을 계산하는 경우, 셰이딩 후 필터링은 정확한 스펙트럼을 계산하여 축소 시 외관을 보존합니다.

셰이딩 후 필터링은 앨리어싱을 줄이는 데 효과적일 수 있지만, 확대 시에는 앨리어싱을 증가시킬 수 있습니다. 따라서 렌더링의 비선형성, 텍스처의 주파수 내용, 확대 비율 등을 고려하여 필터링 방식을 선택해야 합니다.

스토캐스틱 텍스처 필터링을 도입함으로써, 셰이딩 후 필터링을 효율적으로 구현할 수 있습니다. 확률적 샘플링 기법을 통해 필터링 후 셰이딩을 효율적으로 수행할 수 있으며, 다양한 샘플링 기법을 사용하여 계산 비용을 줄이고자 합니다. 이러한 접근법은 텍스처 필터링의 정확성을 높이고, 고품질의 렌더링 결과를 제공할 수 있습니다.

## **4 STOCHASTIC TEXTURE FILTERING**

이 장에서는 셰이딩 후 필터링을 효율적으로 수행하기 위해 스토캐스틱 텍스처 필터링(STF)을 도입합니다. 이 방법은 계산 비용을 줄이면서도 높은 정확도의 필터링 결과를 제공합니다. 두 가지 주요 기법인 필터 리저버 샘플링(Filter Reservoir Sampling, FRS)과 필터 중요도 샘플링(Filter Importance Sampling, FIS)을 중심으로 설명합니다.

**4.1 Filter Reservoir Sampling (FRS)**

필터 리저버 샘플링은 텍스처 필터의 가중치를 평가하고, 확률적으로 샘플링하여 효율적으로 필터링을 수행합니다. 예를 들어, 2차원 B-스플라인 필터는 4x4 텍셀 값을 가중치에 따라 샘플링합니다. 이를 통해 다차원 필터를 단일 텍셀 접근으로 대체할 수 있습니다. 이 방법은 고차원 필터에서도 샘플 선택 비용을 줄여주어 효율적입니다.

**4.2 Filter Importance Sampling (FIS)**

필터 중요도 샘플링은 연속 필터를 샘플링하여 높은 품질의 필터를 효율적으로 구현할 수 있습니다. FIS는 필터 크기와 상관없이 일정한 비용으로 수행되며, 무한한 공간적 지원을 가진 필터를 사용할 수 있습니다. 이는 특히 부정적인 가중치를 가진 필터나 높은 차원의 필터에서 유용합니다.

![이미지 재구성 필터 화면 공간 지터링(왼쪽) 및 UV 공간 필터 중요도 샘플링 지터링(오른쪽). 확대하는 동안 화면 공간 지터의 공간적 범위는 텍셀 크기보다 훨씬 작을 수 있으며, 여러 픽셀을 덮을 수 있습니다. 텍스처 재구성 필터 𝑓f의 경우 더 큰 지터가 필요합니다.](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%205.png)

이미지 재구성 필터 화면 공간 지터링(왼쪽) 및 UV 공간 필터 중요도 샘플링 지터링(오른쪽). 확대하는 동안 화면 공간 지터의 공간적 범위는 텍셀 크기보다 훨씬 작을 수 있으며, 여러 픽셀을 덮을 수 있습니다. 텍스처 재구성 필터 𝑓f의 경우 더 큰 지터가 필요합니다.

![화면 공간 내의 균일 지터링(왼쪽)은 UV 텍스처 공간에서 사다리꼴, 비균일 커버리지(중앙)를 생성합니다. 필터 중요도 샘플링은 텍스처 재구성 필터 𝑓f(예: Gaussian 분포)용으로 UV를 추가로 지터링합니다(오른쪽).](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%206.png)

화면 공간 내의 균일 지터링(왼쪽)은 UV 텍스처 공간에서 사다리꼴, 비균일 커버리지(중앙)를 생성합니다. 필터 중요도 샘플링은 텍스처 재구성 필터 𝑓f(예: Gaussian 분포)용으로 UV를 추가로 지터링합니다(오른쪽).

**4.2.1 Screen-Space Anisotropic Minification**

이방성 필터링 기법은 텍스처 좌표의 부분 파생값으로부터 필터 풋프린트를 타원으로 모델링합니다. 화면 공간 지터링을 사용하여 타원을 근사적으로 샘플링하고, MIP 레벨을 확률적으로 선택합니다. 이 방법은 GPU 텍스처 캐시를 효율적으로 사용하여 높은 품질의 필터링을 구현합니다.

![두 가지 확대 필터링 확률적 텍스처 매핑 방법의 비교. 필터 중요도 샘플링의 경우 최종 필터는 샘플링된 분포와 텍셀 확장 박스 필터의 컨볼루션 결과입니다.](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%207.png)

두 가지 확대 필터링 확률적 텍스처 매핑 방법의 비교. 필터 중요도 샘플링의 경우 최종 필터는 샘플링된 분포와 텍셀 확장 박스 필터의 컨볼루션 결과입니다.

**4.3 Comparison of FRS and FIS**

FRS와 FIS는 각각의 장단점이 있습니다. FIS는 구현이 간단하고 일정한 비용을 가지며, 무한한 필터 지원을 처리할 수 있습니다. 반면, FRS는 이산 형태의 필터나 연속 필터의 샘플링이 어려운 경우에 적합합니다. 또한, FRS는 여러 무작위 숫자를 필요로 하지 않아 샘플링 유지에 유리합니다.

![축소 시 법선 맵핑된 표면의 외관. (a)–(c)는 하드웨어 텍스처 필터링, MIP 맵 및 최대 이방성 16을 사용하여 셰이딩 전에 필터링을 수행합니다. (d)–(g)는 확률적 삼중 입방체 필터와 최대 이방성 64를 사용하여 셰이딩 후 필터링을 수행합니다. (d)–(f)는 MIP 맵을 사용하고, (g)는 MIP 맵을 사용하지 않습니다. (h)는 점 샘플링된 참조 이미지입니다. 셰이딩 후 필터링의 모든 변형은 재질의 외관을 더 정확하게 보존하며, 전통적인 텍스처 필터링은 상당한 오류를 유발합니다.](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%208.png)

축소 시 법선 맵핑된 표면의 외관. (a)–(c)는 하드웨어 텍스처 필터링, MIP 맵 및 최대 이방성 16을 사용하여 셰이딩 전에 필터링을 수행합니다. (d)–(g)는 확률적 삼중 입방체 필터와 최대 이방성 64를 사용하여 셰이딩 후 필터링을 수행합니다. (d)–(f)는 MIP 맵을 사용하고, (g)는 MIP 맵을 사용하지 않습니다. (h)는 점 샘플링된 참조 이미지입니다. 셰이딩 후 필터링의 모든 변형은 재질의 외관을 더 정확하게 보존하며, 전통적인 텍스처 필터링은 상당한 오류를 유발합니다.

**4.4 Material Graphs**

복잡한 패턴은 단순한 노드로 구성된 그래프를 사용하여 생성됩니다. 이러한 그래프는 확률적으로 평가할 수 있으며, 오프라인 렌더링에서 수백 개의 노드를 가진 그래프를 효율적으로 처리할 수 있습니다.

스토캐스틱 텍스처 필터링을 통해 셰이딩 후 필터링을 효율적으로 구현하고, 다양한 텍스처 필터를 사용하는 방법을 제시합니다. 이 방법은 고품질의 텍스처 필터링을 가능하게 하여 렌더링 품질을 크게 향상시킬 수 있습니다.

## **5 RESULTS**

이 장에서는 스토캐스틱 텍스처 필터링(STF)이 실시간 렌더링과 오프라인 렌더링에서 어떻게 성능과 이미지 품질을 향상시키는지 평가한 결과를 제시합니다. 모든 성능 측정은 NVIDIA RTX 4090 GPU에서 수행되었습니다.

![이중선형 필터링(a)과 DLSS의 시간적 누적을 사용하여 해결된 확률적 단일 샘플 추정의 삼중 입방체 Mitchell 필터(b) 및 Gaussian 필터(c)의 비교. Mitchell 필터는 이중선형보다 훨씬 더 선명하며 다이아몬드 같은 아티팩트를 생성하지 않습니다. Gaussian 필터는 등방성으로 텍스처를 흐리게 만드는 경향이 있지만 대각선 선의 재구성에서는 최상의 결과를 제공합니다.](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%209.png)

이중선형 필터링(a)과 DLSS의 시간적 누적을 사용하여 해결된 확률적 단일 샘플 추정의 삼중 입방체 Mitchell 필터(b) 및 Gaussian 필터(c)의 비교. Mitchell 필터는 이중선형보다 훨씬 더 선명하며 다이아몬드 같은 아티팩트를 생성하지 않습니다. Gaussian 필터는 등방성으로 텍스처를 흐리게 만드는 경향이 있지만 대각선 선의 재구성에서는 최상의 결과를 제공합니다.

**5.1 실시간 렌더링**

실시간 렌더링 평가를 위해 Falcor를 사용하여 DLSS를 활용한 텍스처 필터링의 효과를 측정했습니다. DLSS는 시간적 통합기술로, Halton 시퀀스와 Spatio-Temporal Blue Noise(STBN) 마스크를 사용하여 확률적 필터링 노이즈를 억제합니다. Disney BRDF와 단일 방향광을 사용하여 4K 해상도에서 테스트를 진행했습니다.

스토캐스틱 텍스처 필터링은 표준 텍스처 형식을 사용한 경우 성능 이점이 크지 않지만, 하드웨어로 가속되지 않는 새로운 텍스처 표현 및 압축 형식을 사용할 때 매우 효율적입니다. 또한, 고품질의 텍스처 필터를 저비용으로 사용할 수 있게 하여 이미지 품질을 향상시킵니다.

**5.2 필터링 후 셰이딩**

필터링 후 셰이딩의 경우, 스토캐스틱 확대 및 축소 필터의 결합 효과를 보여줍니다. MIP 맵을 사용하는 경우 약간의 오류가 발생하지만, 전체적으로 필터링 전 셰이딩 방식보다 참조 이미지에 더 가깝습니다.

**5.3 확대 필터 리저버 샘플링**

확대 필터링에서는 Mitchell과 Gaussian 필터를 사용한 고품질 필터링이 bilinear 필터링보다 더 나은 이미지 품질을 제공합니다. STBN과 DLSS를 사용하여 노이즈나 깜빡임 없이 부드러운 이미지가 구현되었습니다.

**5.4 확대 필터 중요도 샘플링**

무한한 확장 필터를 사용한 필터 중요도 샘플링은 잘린 Gaussian 커널로 인해 발생하는 그리드와 같은 시각적 아티팩트를 제거하여 더 나은 이미지 품질을 제공합니다.

![다양한 𝜎 값을 가진 Gaussian 텍스처 필터링에서 FRS와 FIS를 비교한 것. 𝜎 = 0.5인 경우 두 방법은 매우 유사한 결과를 제공합니다. FIS는 상대적으로 작거나 큰 𝜎 값에서 더 나은 결과를 제공합니다. 마지막 열에서 차이를 보기 위해 확대를 권장합니다.](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%2010.png)

다양한 𝜎 값을 가진 Gaussian 텍스처 필터링에서 FRS와 FIS를 비교한 것. 𝜎 = 0.5인 경우 두 방법은 매우 유사한 결과를 제공합니다. FIS는 상대적으로 작거나 큰 𝜎 값에서 더 나은 결과를 제공합니다. 마지막 열에서 차이를 보기 위해 확대를 권장합니다.

![확률적 이방성 및 삼중 입방체 필터링을 사용하여 렌더링된 체커보드(상단). 빨간색 및 파란색 인셋(하단 행)은 축소된 영역과 확대된 영역을 보여주며, 확률적 이중선형 및 삼중 입방체 필터링과 하드웨어 이방성 필터링 및 1024 spp 참조 솔루션을 비교합니다. 확률적 필터링은 FIS와 STBN을 사용하고, 참조 이미지는 필터링에 균일 분포를 사용했습니다.](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%2011.png)

확률적 이방성 및 삼중 입방체 필터링을 사용하여 렌더링된 체커보드(상단). 빨간색 및 파란색 인셋(하단 행)은 축소된 영역과 확대된 영역을 보여주며, 확률적 이중선형 및 삼중 입방체 필터링과 하드웨어 이방성 필터링 및 1024 spp 참조 솔루션을 비교합니다. 확률적 필터링은 FIS와 STBN을 사용하고, 참조 이미지는 필터링에 균일 분포를 사용했습니다.

**5.5 이방성 필터링 및 축소**

이방성 필터링 및 축소에서 DLSS를 사용한 시간적 필터링이 고품질의 이방성 필터링 이미지를 복원할 수 있음을 보여줍니다. 텍스처 샘플링 노이즈는 거의 감지되지 않습니다.

**5.6 Triplanar Mapping**

Triplanar Mapping은 표면 방향에 따라 세 가지 텍스처를 샘플링하여 과도한 텍스처 스트레칭을 피합니다. DLSS가 스토캐스틱 샘플링 오류를 효과적으로 해결하며, 시간적 시각적 아티팩트가 발생하지 않습니다.

![ 전체 triplanar 매핑(상단)과 확률적 단일 샘플 추정(하단)의 비교. 왼쪽에서 오른쪽으로 순수 확산 셰이딩, 법선 맵핑을 포함한 확산 셰이딩, 전체 스펙큘러 및 확산 조명을 보여줍니다. 인셋은 10배 확대된 오류를 보여줍니](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%2012.png)

 전체 triplanar 매핑(상단)과 확률적 단일 샘플 추정(하단)의 비교. 왼쪽에서 오른쪽으로 순수 확산 셰이딩, 법선 맵핑을 포함한 확산 셰이딩, 전체 스펙큘러 및 확산 조명을 보여줍니다. 인셋은 10배 확대된 오류를 보여줍니

![DCT 압축 텍스처 세트의 확률적 필터링(왼쪽). 원래 비압축 텍스처(왼쪽 상단 인셋)에서 고주파 디테일이 일부 손실되었음에도 불구하고, 확률적 삼중선형(오른쪽 상단 인셋) 및 결정적 삼중선형(왼쪽 하단 인셋) 필터링 결과는 사실상 동일해 보이며, 10배 확대된 오류 이미지(오른쪽 하단)로 확인할 수 있습니다. 확률적 필터링은 렌더링 시간을 1.66ms에서 0.57ms로 줄입니다.](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%2013.png)

DCT 압축 텍스처 세트의 확률적 필터링(왼쪽). 원래 비압축 텍스처(왼쪽 상단 인셋)에서 고주파 디테일이 일부 손실되었음에도 불구하고, 확률적 삼중선형(오른쪽 상단 인셋) 및 결정적 삼중선형(왼쪽 하단 인셋) 필터링 결과는 사실상 동일해 보이며, 10배 확대된 오류 이미지(오른쪽 하단)로 확인할 수 있습니다. 확률적 필터링은 렌더링 시간을 1.66ms에서 0.57ms로 줄입니다.

![실시간 설정에서 노이즈 제거에 대한 DLSS와 STBN의 효과. 백색 노이즈(a)는 시각적으로 산만한 노이즈 패턴을 생성하지만 STBN(b)은 그 출현을 극적으로 줄입니다. DLSS를 시간적 통합기로 사용할 때(c) 노이즈는 단일 프레임 결과(a)에 비해 크게 줄어듭니다. DLSS와 STBN을 결합하면(d) 노이즈는 거의 감지되지 않습니다.](Filtering%20After%20Shading%20With%20Stochastic%20Texture%20Fi%204aa5601273b14eb6b59b784a58ff137e/Untitled%2014.png)

실시간 설정에서 노이즈 제거에 대한 DLSS와 STBN의 효과. 백색 노이즈(a)는 시각적으로 산만한 노이즈 패턴을 생성하지만 STBN(b)은 그 출현을 극적으로 줄입니다. DLSS를 시간적 통합기로 사용할 때(c) 노이즈는 단일 프레임 결과(a)에 비해 크게 줄어듭니다. DLSS와 STBN을 결합하면(d) 노이즈는 거의 감지되지 않습니다.

**5.7 텍스처 압축**

스토캐스틱 텍스처 필터링은 더 복잡한 텍스처 압축 및 해제 알고리즘을 사용하여 각 조회 시 단일 텍셀만 디코딩하면 됩니다. 2D 이산 코사인 변환(DCT)을 사용하여 텍스처 압축 성능을 크게 향상시킬 수 있음을 보여줍니다.

**5.8 시각적 노이즈 제거 연구**

DLSS와 STBN이 스토캐스틱 텍스처 필터링으로 인한 시각적 노이즈를 효과적으로 억제함을 입증했습니다. DLSS를 사용하면 시각적 노이즈가 거의 완전히 제거됩니다.

**5.9 오프라인 렌더링**

오프라인 렌더링에서는 Disney Cloud를 렌더링하여 스토캐스틱 필터링이 전통적인 필터링과 거의 동일한 시각적 결과를 제공함을 보여줍니다. 스토캐스틱 필터링은 텍스처 조회를 줄여 고품질의 필터링을 더 짧은 시간에 수행할 수 있게 합니다.

이러한 결과는 스토캐스틱 텍스처 필터링이 실시간 및 오프라인 렌더링 모두에서 성능과 이미지 품질을 크게 향상시킬 수 있음을 보여줍니다.

## **6 RECOMMENDATIONS**

셰이딩 후 필터링은 대부분의 비선형 연산 및 텍스처에서 더 정확한 결과를 제공하지만, 이 방식으로의 전환은 실질적인 도전 과제를 동반합니다. 필터링 방법이 다르면 동일한 조명 및 재질 시스템에서도 결과가 달라질 수 있어, 기존 3D 자산의 외관이 변경될 수 있습니다. 따라서 이 방법을 대체 방안으로 사용할 때는 아트 리뷰가 필요할 수 있습니다.

셰이딩 후 필터링은 주로 확산적이거나 거친 표면에서는 필터링 전 셰이딩과 시각적으로 구별되지 않습니다. 비선형성이 높은 셰이딩, 예를 들어 투명도와 같은 경우에는 큰 외관 차이를 초래할 수 있습니다. 또한, 스토캐스틱 텍스처 필터링은 충분한 시공간 데이터가 있어야 최상의 효과를 발휘할 수 있습니다. 가장 정교한 머신러닝 기반 재구성 기술도 프레임마다 깜빡이는 서브픽셀 기하학적 디테일 앞에서는 한계를 보입니다.

셰이딩 후 필터링과 STF는 축소 시 앨리어싱을 줄이는 데 특히 효과적입니다. 렌더링 비선형성은 고해상도 텍스처에서 새로운 고주파 성분을 도입하게 되며, 이는 여러 픽셀이나 샘플을 통해 효율적으로 필터링할 수 있습니다. 확대 시에는 앨리어싱이 증가할 수 있으므로, 1대1 텍셀-픽셀 비율을 유지하고 확대 비율을 제한하는 것이 좋습니다. 텍스처 스트리밍과 가상 텍스처링의 보편화로 충분한 디스크 저장 용량이 확보된다면, 이는 달성 가능하며 텍스처 스트리밍 동안 업샘플링 및 생성 기술을 통해 해결할 수 있습니다.

## **7 DISCUSSION AND FUTURE WORK**

스토캐스틱 텍스처 필터링은 조명 적분 외부에서 효율적으로 필터링을 수행함으로써, 텍스처 매개변수가 비선형 기여도를 가지는 경우 체계적인 오류를 제거합니다. 이러한 방식은 축소 시 외관을 보존하며, 법선 맵, 다수의 BSDF 특성, 온도와 같은 사례에서 유용합니다.

스토캐스틱 필터링은 복잡한 압축 텍스처 표현을 가능하게 하여 필터를 단일 텍셀 조회로 축소합니다. 또한, 고성능 코드에서 고품질의 텍스처 필터를 사용할 수 있게 하여 이미지 품질을 향상시킵니다. 우리의 연구가 실시간 렌더링에서 고차원 텍스처 필터의 채택을 촉진하고, 저품질의 이중 선형 필터 의존성을 줄이기를 기대합니다.

우리는 DLSS와 같은 시간적 필터링 알고리즘이 스토캐스틱 텍스처 필터링으로 인한 미세한 노이즈를 효과적으로 관리할 수 있음을 보여주었습니다. 전반적인 재구성 품질은 만족스러우나, 고대비 영역과 패턴에서 약간의 깜빡임과 유령 현상이 남아 있습니다. DLSS는 스토캐스틱 텍스처 필터링 데이터를 포함하여 학습 데이터를 확장함으로써 재구성 품질을 더욱 향상시킬 수 있을 것입니다.

마지막으로, 우리는 더 복잡하고 비선형적인 재구성 필터를 사용할 가능성을 열어두고 있습니다. 이러한 필터는 엣지와 같은 이미징 특징을 재구성하는 데 효과적이며, 슈퍼 해상도를 위해 필수적입니다. 저해상도에서 저렴하게 계산되는 비선형 지역 필터 매개변수나 가중치를 얻을 수 있다면, 스토캐스틱 필터링 프레임워크를 적용하여 이미지 품질을 더욱 향상시킬 수 있을 것입니다.