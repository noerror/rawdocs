# Inverse Procedural Modeling of Trees

[https://www.youtube.com/watch?v=xAXURO5ePaM&ab_channel=VisualComputing-Konstanz](https://www.youtube.com/watch?v=xAXURO5ePaM&ab_channel=VisualComputing-Konstanz)

[https://cfcs.pku.edu.cn/baoquan/docs/20180621170343624947.pdf](https://cfcs.pku.edu.cn/baoquan/docs/20180621170343624947.pdf)

- 2014

## 1 Introduction

식물 모델링 방법은 주로 세 가지 주요 범주로 나눌 수 있다: 실제 세계 데이터를 재구성하는 방법, 상호작용적 모델링 방법, 그리고 절차적 또는 규칙 기반 시스템이다. 이러한 방법으로 생성된 모델의 현실성은 매우 높지만, 여전히 해결해야 할 많은 문제들이 존재한다.

![입력된 폴리곤 나무 모델(a)은 우리의 역절차적 모델링 시스템에 의해 처리되었고, 발달 모델의 입력 파라미터가 추정되어 확률적으로 유사한 나무(b–d)를 생성할 수 있게 되었다. 발달 모델은 환경에 민감한 나무 모델(e)을 생성할 수 있다.](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled.png)

입력된 폴리곤 나무 모델(a)은 우리의 역절차적 모델링 시스템에 의해 처리되었고, 발달 모델의 입력 파라미터가 추정되어 확률적으로 유사한 나무(b–d)를 생성할 수 있게 되었다. 발달 모델은 환경에 민감한 나무 모델(e)을 생성할 수 있다.

재구성 및 상호작용적 방법으로 생성된 나무는 일반적으로 정적이며 변화하는 환경에 반응하지 않는다. 반면에 절차적 방법은 다양한 식물을 생성할 수 있으며, 환경에 민감하게 반응하고 조건이 변함에 따라 형태를 조정할 수 있다. 그러나 절차적 모델의 제어 가능성은 낮으며, 보통 입력 파라미터의 집합을 생성하여 제어하는데, 이는 번거로운 수작업 과정이 필요하다. 이 문제는 복잡한 절차적 모델이 필요한 오늘날의 대규모 현실적인 장면을 생성하는데 더욱 심각해진다. 이러한 절차적 모델링의 단점을 극복하기 위해 역문제, 즉 주어진 나무에 대한 절차적 모델의 파라미터를 자동으로 계산하는 방법을 해결해야 한다. 이 파라미터가 결정되면, 나무를 재구성하고 동시에 절차적 모델링의 모든 장점을 제작 과정에 적용할 수 있다.

최근 다양한 역모델링 접근법이 소개되었지만, 생물학적 나무의 확률적 절차적 모델의 파라미터를 찾는 문제는 컴퓨터 그래픽스 커뮤니티에서 다루어지지 않았다. 우리는 생물학적 나무의 확률적 역절차적 모델링을 위한 프레임워크를 소개하며, 이는 세 가지 주요 기여를 제공한다: 다양한 나무를 설명하는 새로운 컴팩트 파라미터 절차적 모델, 두 나무의 비교를 위한 효율적인 유사성 계산 방법, 주어진 입력 나무에 대한 절차적 모델의 입력 파라미터를 자동으로 결정하는 방법이다.

우리 프레임워크의 입력은 단일 3D 폴리곤 나무 모델(또는 이러한 모델의 집합)이다. 우리 프레임워크는 몬테카를로 마코프 체인(MCMC) 최적화를 통해 입력 파라미터를 최적화하여 입력의 시각적 외관을 최대한 가깝게 재현한다. 입력은 결과적인 절차적 모델과 그 입력 파라미터 집합으로 근사화된다. 우리는 다양한 나무 모델을 통해 프레임워크를 시연하고, 동일한 종의 나무, 다른 나이의 나무, 또는 다양한 환경 조건에서 자란 나무를 생성하는 데 어떻게 절차적 표현을 사용할 수 있는지 보여준다.

## 2 Related Work

식물 모델링은 오랫동안 컴퓨터 그래픽스 연구의 중요한 주제로 다루어져 왔다. 전통적인 방법으로는 규칙 기반 시스템, 입자 시스템, 환경 민감 오토마타, 그리고 공간 식민지화 방법 등이 있다.

지난 10년 동안 실제 나무를 재구성하려는 노력이 이루어졌다. 예를 들어, Reche-Martinez 등은 등록된 이미지를 사용해 나무 캐노피의 부피 표현을 생성했고, Neubert 등은 느슨하게 배열된 입력을 사용해 작업했다. 이미지 기반 방법과 대조적으로, Livny 등은 레이저 스캔된 점 집합을 사용해 나무를 재구성했다.

최근에는 그래프 골격에 따라 나무 모델을 동적으로 조정하는 두 가지 접근법이 제안되었다. 첫 번째는 Pirk 등(PNDN12)이 제안한 방법으로, 하나의 입력 예시에서 초기 발달 단계를 추론하는 것이며, 두 번째는 Pirk 등(PSK12)이 제안한 방법으로, 정적인 입력 나무에 환경 민감성을 적용해 사용자가 다양한 환경 조건에서 나무의 구조를 자동으로 변경할 수 있게 하는 것이다. 이 두 방법은 효율적인 처리를 중점으로 하며, 성장 모델에 필요한 일부 파라미터만을 사용하기 때문에 새로운 나무 모델 생성이나 가지 추가가 불가능하다.

스케치 기반 방법은 2D 입력에서 3D 구조를 추론하는 생물학적 규칙을 사용해 나무 모델링을 유도하는 데 사용되었다. Weber와 Penn(WP95)의 사용자 보조 방법, 그리고 규칙 기반 및 절차적 모델링을 결합하여 식물 모델에 직접 영향을 미치는 Xfrog 모델링 시스템 등이 초기 사용자 보조 방법 중 하나이다. 다양한 모델링 기술에 대한 개요는 DL04에서 제시되었다.

재작성 과정의 제어 어려움과 규칙 생성의 낮은 직관성으로 인해 역절차적 모델링 문제에 중점을 둔 연구들이 등장했다. Ijiri 등(IMIM08)은 2D 요소 배열에서 절차적 모델을 구축하는 시스템을 제안했고, Stava 등(SBM10)은 변환 공간을 사용해 임의의 벡터 이미지를 설명하는 절차적 규칙을 생성했다. 3D로의 확장은 BWS10에 의해 제시되었으며, 이들 작업에서는 고도로 규칙적이고 대칭적인 입력에 대해 설득력 있는 절차적 모델을 얻을 수 있었지만, 확률적 데이터에는 적용할 수 없었다.

주어진 절차적 모델의 입력을 생성하는 파라미터 집합을 찾는 것은 복잡한 작업이다. 이 파라미터는 MCMC 샘플링과 같은 최적화 기술을 사용해 추정할 수 있다. 이 접근법은 절차적 모델의 외관을 찾거나 절차적 모델링에서 재작성 과정을 지시하는 데 사용되었다. 우리의 방법과 유사한 접근법은 Vanegas 등(VGDA12)이 제시한 것으로, 이는 정규 가상 도시의 상호작용적 모델링을 목표로 하고 있다. Cournede 등(CLM11)은 확률적 절차적 식물 모델의 파라미터를 자동으로 감지하는 방법을 제시했지만, 이는 실제 나무의 바이오매스 분포의 정밀한 측정에 의존해 컴퓨터 그래픽스 응용에는 비현실적이다.

## 3 Method Overview

![프레임워크 개요: 절차적 모델의 입력 파라미터는 입력 모델과 생성된 모델 간의 유사성 측정 및 최적화를 통해 추정된다.](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%201.png)

프레임워크 개요: 절차적 모델의 입력 파라미터는 입력 모델과 생성된 모델 간의 유사성 측정 및 최적화를 통해 추정된다.

![다양한 파라미터가 가지 성장에 영향을 미친다: 굽힘 각도 ϕBAM, 회전 각도 ϕRAM, 정점 각도 분산 ϕAAV.](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%202.png)

다양한 파라미터가 가지 성장에 영향을 미친다: 굽힘 각도 ϕBAM, 회전 각도 ϕRAM, 정점 각도 분산 ϕAAV.

다양한 입력 나무에 대한 컴퓨터 그래픽스 절차적 표현을 찾기 위해서는 다양한 나무 종을 생성할 수 있는 강력한 절차적 모델이 필요하다. 전체 모델을 구조적 설명을 포함하여 역설계하는 것은 어려우나, 적절한 파라미터 모델을 사용하면 많은 나무 종을 표현할 수 있다. 이는 주어진 절차적 모델이 입력 나무와 유사한 나무를 생성할 수 있는 올바른 파라미터 집합을 찾는 문제로 축소된다.

우리의 모델링 프레임워크는 LiDAR 스캔, Xfrog 라이브러리 모델, SpeedTree 모델 또는 Open L-시스템에서 생성된 단일 또는 다중 기하학적 나무 모델을 사용한다. 이 모델은 Au 등(ATC08)의 알고리즘을 참고하여 트리 그래프 표현으로 변환된다.

우리는 최근 식물 생물학과 컴퓨터 그래픽스의 연구 결과를 통합한 절차적 모델을 사용한다. 모델의 입력 파라미터는 두 나무의 시각적 및 구조적 유사성을 계산하는 유사성 측정을 최대화하여 결정된다. 이는 MCMC 기반 최적화를 통해 수행되며, 새로운 파라미터 값을 제안하여 생성된 나무의 유사성을 점진적으로 증가시키고 더 이상 개선할 수 없을 때 종료된다.

우리의 프레임워크는 입력으로 단일 3D 폴리곤 나무 모델(또는 그러한 모델의 집합)을 받는다. MCMC 최적화를 통해 입력 파라미터를 최적화하여 입력의 시각적 외관을 최대한 가깝게 재현한다. 입력은 결과적인 절차적 모델과 그 입력 파라미터 집합으로 근사화된다. 다양한 나무 모델을 통해 프레임워크를 시연하고, 동일한 종의 나무, 다른 나이의 나무, 또는 다양한 환경 조건에서 자란 나무를 생성하는 데 어떻게 절차적 표현을 사용할 수 있는지 보여준다.

## 4 Used Procedural Model

나무는 다양한 종에 따라 여러 형태를 가지며, 이는 높은 표현력을 가진 발달 모델로 표현할 수 있다. 다양한 발달 식물 모델이 존재하지만, 대부분은 제한된 수의 종만을 설명한다.

우리는 최근 식물 생물학과 컴퓨터 그래픽스의 발전을 기반으로 한 새로운 파라미터 절차적 모델을 소개한다. 이 모델은 각 성장 주기 동안 나무가 활성 눈에서 가지를 성장시키는 발달 공식으로 작동한다. 새로운 가지는 성장하면서 새로운 눈을 만들고, 이 눈은 다음 성장 주기 동안 다시 성장할 수 있다. 개별 가지의 성장과 눈의 발아는 빛 기반 모델에 의해 제어된다. 하나의 성장 주기는 반드시 1년을 의미하지 않으며, 일부 종은 1년에 여러 번의 성장 주기를 겪는다.

![(a) 가지 각도를 증가시킨 효과(왼쪽에서 오른쪽으로); (b) 높은 정점 제어를 가진 나무(왼쪽)는 긴 줄기와 짧은 측면 가지를 가지며, 낮은 정점 제어는 전형적인 구형 수관을 가지게 한다(오른쪽); (c) 높은 정점 지배는 가지가 덜 빈번하게 생겨 특정 가지가 지배적이 되도록 한다(왼쪽). 낮은 정점 지배를 가진 나무는 매우 자주 가지를 치며, 많은 동등한 지배 가지를 만든다(오른쪽).](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%203.png)

(a) 가지 각도를 증가시킨 효과(왼쪽에서 오른쪽으로); (b) 높은 정점 제어를 가진 나무(왼쪽)는 긴 줄기와 짧은 측면 가지를 가지며, 낮은 정점 제어는 전형적인 구형 수관을 가지게 한다(오른쪽); (c) 높은 정점 지배는 가지가 덜 빈번하게 생겨 특정 가지가 지배적이 되도록 한다(왼쪽). 낮은 정점 지배를 가진 나무는 매우 자주 가지를 치며, 많은 동등한 지배 가지를 만든다(오른쪽).

![발달 모델로 생성된 나무의 성장(왼쪽에서 오른쪽으로): 5, 10, 15, 20, 25, 30년.](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%204.png)

발달 모델로 생성된 나무의 성장(왼쪽에서 오른쪽으로): 5, 10, 15, 20, 25, 30년.

### 4.1 Parameters

우리의 모델은 나무 형태에 영향을 미치는 내부 및 외부 요인을 설명하는 24개의 파라미터로 제어된다. 이 파라미터는 세 그룹으로 나뉜다: (1) 기하학적 파라미터, (2) 환경 파라미터, (3) 눈의 운명을 결정하는 파라미터.

기하학적 파라미터는 마디 길이나 나선 배열 등 특정 식물 기관의 형태를 정의하며, 전체 식물의 형태에 중요하다. 실제 가지 구조와 밀도는 눈의 운명 파라미터에 의해 제어된다. 마지막으로, 환경 파라미터는 나무와 환경 간의 상호작용을 설명하는데, 예를 들어 빛과 중력과의 상호작용이 있다.

파라미터 공간이 넓기 때문에 목표 종에 대한 적절한 파라미터를 수동으로 찾는 것은 어렵다. 역모델링과 효율적인 샘플링 알고리즘을 통해 파라미터 공간을 자동으로 최적화할 수 있다.

기하학적 파라미터는 다양한 나무 종의 기하학적 특성을 나타낸다. 예를 들어, 나무의 나선 배열은 가지의 수와 상대적 방향을 제어하며, 각도 변수의 분산은 생성된 나무에 무작위성을 추가한다. 가지 길이는 성장률과 마디 길이에 의해 제어되며, 이는 두 마디 사이의 거리를 결정한다.

눈의 운명은 눈이 성장 주기 동안 발아할지 여부를 결정한다. 눈은 빛의 영향과 식물 호르몬의 기능에 따라 새로운 가지를 형성하거나 휴면 상태를 유지할 수 있다. 눈의 발아는 옥신이라는 호르몬에 의해 제어되며, 이 호르몬은 새로운 가지가 성장하기 시작하면 생성되어 뿌리로 운반된다.

환경 파라미터는 주변 환경이 식물에 미치는 영향을 정의한다. 빛과 중력은 가지의 성장 방향에 직접적인 영향을 미친다. 가지가 빛을 향해 구부러지는 굴광성이나 중력을 피하는 굴중성 등이 이에 해당한다.

### 4.2 Foliage

우리는 잎의 성장을 직접 시뮬레이션하는 대신 Livny 등의 절차적 시스템을 사용한다. 잎은 말단 가지를 따라 배치되며, 특정 종이 모델에 수동으로 할당된다. 이는 스캔된 실제 나무 모델에 유리한 높은 잎 밀도를 결과로 가져온다.

### 4.3 Example Trees

우리의 절차적 모델로 생성된 나무의 발달 과정을 보여주는 예시와 다양한 파라미터를 설정하여 생성된 여러 형태의 나무 예시를 제시한다. 파라미터 공간이 넓기 때문에 시도와 오류를 통해 나무를 생성하는 것이 어려울 수 있다.

## 5 Similarity Measure and Optimization

우리의 파라미터 모델을 설명한 후, 이제 입력 데이터와 생성된 나무 간의 유사성을 최대화하는 파라미터 집합을 찾는 방법에 중점을 두고자 한다. 환경 파라미터를 최적화하는 대신, 우리는 나무의 형태, 기하학적 구조, 가지 구조를 비교하는 새로운 유사성 거리 측정을 도입한다.

![ 절차적 모델로 생성된 다양한 종들. 해당 파라미터 값은 표 2에서 찾을 수 있다.](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%205.png)

 절차적 모델로 생성된 다양한 종들. 해당 파라미터 값은 표 2에서 찾을 수 있다.

![Table 1: Summary of all parameters of the growth model.](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%206.png)

Table 1: Summary of all parameters of the growth model.

![Table2: Parameters for trees generated by the deve/opmefltal model](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%207.png)

Table2: Parameters for trees generated by the deve/opmefltal model

![나무 수관은 세 부분으로 나뉘어 두 나무 간 독립적으로 비교된다.](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%208.png)

나무 수관은 세 부분으로 나뉘어 두 나무 간 독립적으로 비교된다.

### 5.1 Shape Distance

형태 거리는 나무의 전체 형태 차이를 측정하는 여러 기술자를 평가한다. 나무의 높이, 수관의 형태, 그리고 잎 가지 밀도 등의 기술자를 사용하여 나무를 세로로 세 개의 수평 단면으로 나눈다. 각 단면에서 나무의 높이, 수평 방향의 평균 반지름, 잎 가지 밀도 등의 차이를 계산하여 형태 거리를 측정한다.

![단일 그래프 노드의 기하학적 속성.](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%209.png)

단일 그래프 노드의 기하학적 속성.

### 5.2 Geometric Distance

두 나무의 형상이 유사할지라도 가지 구조의 기하학적 속성에서 차이가 있을 수 있다. 가지의 길이, 두께, 각도 등의 기하학적 속성을 사용하여 나무의 기하학적 거리를 계산한다. 가지 속성은 가지의 길이와 두께에 따라 가중치가 부여되며, 이러한 속성의 샘플 평균과 분산을 계산하여 기하학적 기술자를 도출한다.

### 5.3 Structural Distance

구조적 거리는 개별 가지의 위치에 따른 차이를 평가한다. 두 나무 그래프의 모든 노드를 최소 비용으로 변환하는 편집 거리를 사용하여 구조적 거리를 계산한다. 노드 분포가 불규칙한 경우, 새로운 split과 merge 연산자를 사용하여 불규칙한 나무 그래프를 비교한다. 이러한 연산자는 삽입, 삭제, 할당 연산자와 결합되어 노드의 기하학적 속성을 변경하고, 편집 거리 계산을 통해 두 나무 그래프 간의 구조적 거리를 도출한다.

![편집 거리: 나무를 변형시키는 할당, 삭제, 삽입 연산의 순서.](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%2010.png)

편집 거리: 나무를 변형시키는 할당, 삭제, 삽입 연산의 순서.

![왼쪽 입력 나무를 오른쪽 나무에 매핑하기 위해(a), 먼저 병합 연산자를 적용하여 왼쪽 나무의 두 노드를 하나로 병합하고, 이를 오른쪽 나무의 단일 노드에 매핑한다(b). 그런 다음 왼쪽 나무의 한 노드를 분할하여 결과를 오른쪽 나무의 두 노드에 매핑한다(c). 분할 연산의 비용을 계산하기 위해, 노드 조인 연산자를 두 노드에 적용하고, 생성된 노드를 왼쪽 나무의 원래 노드와 비교한다(d).](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%2011.png)

왼쪽 입력 나무를 오른쪽 나무에 매핑하기 위해(a), 먼저 병합 연산자를 적용하여 왼쪽 나무의 두 노드를 하나로 병합하고, 이를 오른쪽 나무의 단일 노드에 매핑한다(b). 그런 다음 왼쪽 나무의 한 노드를 분할하여 결과를 오른쪽 나무의 두 노드에 매핑한다(c). 분할 연산의 비용을 계산하기 위해, 노드 조인 연산자를 두 노드에 적용하고, 생성된 노드를 왼쪽 나무의 원래 노드와 비교한다(d).

### 5.4 Optimization of Parameters

절차적 모델 M은 확률적 시스템으로, 각 나무는 파라미터와 시간에 따라 제어된다. 모델 파라미터와 성장 시간을 최적화하여 생성된 모델이 입력 나무와 최대한 유사하도록 유사성 측정을 최대화한다. 이를 위해 몬테카를로 수치 적분 기법을 사용하여 최적화 문제를 근사적으로 해결한다. 무작위 샘플을 사용하여 매개변수 공간을 샘플링하고, 시뮬레이티드 어닐링 알고리즘을 사용하여 매개변수 샘플을 점진적으로 개선해 나간다.

![나무 거리의 최적화.](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%2012.png)

나무 거리의 최적화.

시뮬레이티드 어닐링 알고리즘은 초기 높은 온도에서 시작하여 반복을 거듭할수록 온도를 낮추면서 최적화한다. 우리는 각 입력 모델에 대해 8개의 샘플 나무를 생성하여 충분한 변동성을 확보하고, 최적화 과정의 수렴을 확인한다.

이 최적화 방법을 통해 입력 나무와 유사한 나무를 생성할 수 있는 파라미터를 자동으로 찾을 수 있다.

## 6 Results

우리의 방법을 다양한 입력 모델에 적용한 결과를 보여준다. 각 입력 모델을 처리하는 데 필요한 시간은 표 4에 요약되어 있다. 최적화는 각 입력 모델에 대해 8개의 샘플 나무를 생성하여 수행되었으며, 이는 입력 나무의 형태를 충분히 포착할 수 있도록 충분한 변동성을 제공했다.

![Xfrog 라이브러리의 모델. 왼쪽: 입력 모델과 세 개의 재구성 모델. 오른쪽: 동일한 모델의 골격 구조.](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%2013.png)

Xfrog 라이브러리의 모델. 왼쪽: 입력 모델과 세 개의 재구성 모델. 오른쪽: 동일한 모델의 골격 구조.

![스캔된 데이터에서 얻은 두 모델. 마호가니(a)와 Ficus Virens(b).](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%2014.png)

스캔된 데이터에서 얻은 두 모델. 마호가니(a)와 Ficus Virens(b).

![Open L-시스템을 사용해 생성된 모델(왼쪽)이 우리의 역절차적 접근법을 사용해 재구성된 모습(오른쪽).](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%2015.png)

Open L-시스템을 사용해 생성된 모델(왼쪽)이 우리의 역절차적 접근법을 사용해 재구성된 모습(오른쪽).

### 6.1 Input Models

![환경 상호작용: 왼쪽: 입력 모델이 재구성되어 세 개의 인스턴스가 함께 성장했다. 중간: 빛을 위한 경쟁으로 충돌하는 가지가 가지쳐져, 입력에서 포착되지 않은 상당히 다른 기하학을 초래했다. 오른쪽: 두 개의 재구성된 나무가 자동으로 장애물에 맞게 형태를 조정한다.](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%2016.png)

환경 상호작용: 왼쪽: 입력 모델이 재구성되어 세 개의 인스턴스가 함께 성장했다. 중간: 빛을 위한 경쟁으로 충돌하는 가지가 가지쳐져, 입력에서 포착되지 않은 상당히 다른 기하학을 초래했다. 오른쪽: 두 개의 재구성된 나무가 자동으로 장애물에 맞게 형태를 조정한다.

### 6.1.1 Plant Libraries

식물 라이브러리를 사용하여 생성된 나무 모델은 가장 일반적인 나무 모델 소스 중 하나이다. 우리는 Xfrog 라이브러리에서 얻은 나무에 우리 방법을 적용했다. 직접 모델링 기법의 특성상, 나무는 반복적이고 규칙적인 작은 가지들을 포함하는 경우가 많아 확률적 모델로 정확히 표현하기 어렵다. 그러나, 전반적인 외관은 충실히 모델링할 수 있었다.

### 6.1.2 Scanned Tree Data

폴리곤 모델로 재구성된 실제 나무 모델은 중요한 모델 클래스에 속한다. 이러한 모델은 주로 젊은 나무로, 상대적으로 희박한 가지 구조를 가지며, 작은 가지는 회수하기 어렵기 때문에 주로 주요 가지만 포함된다. 이러한 데이터의 결측에도 불구하고, 우리는 여러 모델의 형태와 구조를 충실히 포착할 수 있었다.

### 6.1.3 Developmental Models

생물학에서 사용되는 발달 규칙 기반 시스템을 사용하여 나무 모델을 생성할 수도 있다. 우리는 Mech와 Prusinkiewicz의 Open L-시스템 접근법을 테스트했다. 비록 Open L-시스템 설명이 발달적이며 내부적으로 규칙 집합과 입력 파라미터를 사용하지만, 우리의 시스템은 발달 모델을 사용하여 높은 유사성을 가진 모델을 생성할 수 있는 파라미터 집합을 찾을 수 있었다.

### 6.1.4 Environmental Interaction

우리 프레임워크의 중요한 특성 중 하나는 나무가 환경과 상호작용하면서 성장할 수 있다는 것이다. 나무가 근접한 위치에서 재구성될 때, 빛에 대한 경쟁으로 인해 충돌하는 가지가 가지쳐진다. 나무가 장애물 근처에서 자라면, 장애물에 의해 생긴 그림자가 나무의 형태에 상당한 변화를 초래한다. 이는 정적인 입력 모델에 중요한 발달 속성을 추가한다.

### 6.2 Limitations

우리의 기술은 많은 입력 기하학적 나무에 대해 절차적 표현을 얻는 데 성공적이었으나, 입력 데이터가 충분한 정보를 제공하지 못하는 경우(예: 가지가 누락되거나 잘못된 토폴로지)에는 좋은 결과를 얻지 못한다. 이러한 문제는 거리 함수를 수정하여 특정 입력 데이터의 특성을 명시적으로 제공함으로써 부분적으로 해결될 수 있다.

모델 라이브러리에서 나무를 분석한 결과, 일부 규칙적인 입력 나무를 정확히 포착하지 못하는 문제도 발견되었다. 이 문제를 해결하려면 발달 모델에 이러한 가지 패턴에 대한 지원을 추가해야 한다. 그러나, 이러한 규칙성은 결과 절차적 모델의 재사용성을 저해할 수 있다.

우리의 절차적 모델은 확률적이기 때문에 주어진 파라미터 집합에 대해 다양한 나무를 생성할 수 있다. 그러나 입력 모델을 정확히 재현할 수는 없다. 만약 특정 종이 우리의 절차적 모델로 포착되지 않는다면, 모델을 확장해야 할 필요가 있다.

## 7 Conclusion and Future Work

![무거운 가지는 무게 때문에 아래로 구부러질 수 있다.](Inverse%20Procedural%20Modeling%20of%20Trees%20d1e06d6ba8bc443493ac700663c9b223/Untitled%2017.png)

무거운 가지는 무게 때문에 아래로 구부러질 수 있다.

우리는 나무의 역절차적 모델링을 위한 접근법을 소개하였다. 이 접근법은 다양한 나무 종을 포착할 수 있는 발달 모델을 사용하며, 역절차적 프레임워크는 입력 나무와 생성된 나무의 유사성을 최대화하는 파라미터를 자동으로 감지한다. 우리는 L-시스템을 사용하는 발달 모델, 스캔된 데이터, 수작업으로 모델링된 나무 등 다양한 입력을 사용하여 우리의 접근법이 여러 나무 종의 절차적 표현을 얻을 수 있음을 보여주었다.

기저 절차적 모델이 확률적이기 때문에, 주어진 파라미터 집합에 대해 유사한 나무의 집합을 생성할 수 있다. 이러한 특성으로 인해 역절차적 시스템은 입력 나무의 동일한 구조를 정확히 재현할 수 없다. 이를 위해서는 절차적 모델의 확률적 성장을 제어하여 규칙 적용 과정에서 생성되는 모든 무작위 파라미터를 고정된 값으로 대체해야 한다. 이는 또 다른 최적화 문제로, Talton 등이 유사한 맥락에서 다루었다.

미래의 연구는 다음과 같은 방향으로 진행될 수 있다:

1. **모델 정밀도 향상**: 입력 나무와 생성된 나무 간의 유사성을 더욱 높이기 위해 모델의 정밀도를 개선할 필요가 있다.
2. **규칙적 패턴 지원**: 규칙적인 가지 패턴을 발달 모델에 통합하여, 더 복잡하고 정밀한 나무 구조를 포착할 수 있도록 한다.
3. **환경 상호작용**: 나무가 환경과 더 복잡하게 상호작용하는 모델을 개발하여, 다양한 환경 조건에서 나무의 성장을 시뮬레이션할 수 있도록 한다.
4. **입력 데이터 확장**: 더 다양한 입력 데이터를 처리할 수 있도록 모델을 확장하여, 결측 데이터나 불완전한 데이터에서도 높은 유사성을 유지할 수 있도록 한다.

이러한 연구 방향을 통해 더 현실적이고 다양한 나무 모델을 생성할 수 있을 것이며, 이는 컴퓨터 그래픽스, 게임, 영화 등 다양한 분야에서 활용될 수 있을 것이다.