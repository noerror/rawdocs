# Optimized Spatial Hashing for Collision Detection of Deformable Objects

[https://www.researchgate.net/publication/2909661_Optimized_Spatial_Hashing_for_Collision_Detection_of_Deformable_Objects](https://www.researchgate.net/publication/2909661_Optimized_Spatial_Hashing_for_Collision_Detection_of_Deformable_Objects)

[https://www.beosil.com/download/CollisionDetectionHashing_VMV03.pdf](https://www.beosil.com/download/CollisionDetectionHashing_VMV03.pdf)

[https://www.beosil.com/](https://www.beosil.com/)

- 2003

## 1 Introduction

서론에서는 탄성 있는 물체의 물리 기반 시뮬레이션과 애니메이션이 다양한 분야에서 중요한 역할을 한다고 설명합니다. 이러한 분야로는 옷감 모델링, 게임, 컴퓨터를 이용한 수술 등이 있습니다. 이런 시뮬레이션과 애니메이션에서 물체 간의 현실적인 상호작용을 구현하려면, 물체들이 서로 충돌할 때 그것을 효과적으로 감지하고 처리할 수 있는 고성능의 충돌 검출 알고리즘이 필수적입니다.

또한, 충돌 검출 정보는 물리적으로 정확한 충돌 반응을 가능하게 하는 데 사용될 수 있어야 합니다. 이 논문은 물체의 기본 요소(예: 정점과 사면체)를 소형 축에 정렬된 경계 상자(AABB) 내에 분류하고, 공간 해싱을 사용하여 이들의 충돌 및 자기 충돌을 감지하는 새로운 알고리즘을 소개합니다. 이를 통해, 충돌 검출을 위한 해시 테이블 인덱스에 물체 기본 요소를 효율적으로 매핑할 수 있으며, 이는 충돌과 자기 충돌을 빠르게 감지하는 데 도움이 됩니다.

해시 함수를 이용한 공간 분할 방식은 매우 효율적이며, 전처리 과정 없이도 사용할 수 있습니다. 하지만, 다른 3D 그리드 셀이 동일한 해시 테이블 인덱스에 매핑될 경우 성능이 저하될 수 있습니다. 이 문제를 해결하기 위해, 해시 함수, 해시 테이블 크기, 3D 셀 크기 등 알고리즘 성능에 영향을 미치는 매개변수를 최적화하는 데 주력했습니다.

![사면체로 구성된 동적으로 변형되는 물체가 있는 환경.](Optimized%20Spatial%20Hashing%20for%20Collision%20Detection%20%2040e0c3ba0bc046a09c7c1e40e4f79b59/Untitled.png)

사면체로 구성된 동적으로 변형되는 물체가 있는 환경.

논문은 이 알고리즘을 사용하여 다양한 복잡성을 가진 탄성 있는 물체를 실시간으로 테스트한 실험 결과도 제시합니다. 이로써, 최대 20,000개의 사면체를 가진 환경에서 실시간 충돌 및 자기 충돌 검출이 가능함을 보여줍니다.

## 2 Related Work

이 분야는 물리 기반 시뮬레이션과 애니메이션뿐만 아니라, 로봇공학, 컴퓨터 애니메이션, 의료 시뮬레이션, 계산 생물학, 게임 등 다양한 응용 분야에서 중요한 역할을 합니다.

**경계 볼륨 계층구조 (Bounding Volume Hierarchies)**

- 충돌 검출 알고리즘에서는 객체를 감싸는 간단한 기하학적 형태(예: 구, 상자)를 사용하여 계산을 단순화하는 경계 볼륨 계층구조가 널리 사용됩니다.
- 이러한 방법은 충돌 검사 과정을 효율적으로 만들지만, 변형 가능한 물체의 경우 실시간으로 계층구조를 업데이트해야 하는 도전이 있습니다.

**분산 거리 필드와 하이브리드 접근법**

- 충돌 검출을 위해 분산 거리 필드(물체를 나타내는 볼륨 데이터)를 사용하는 방법도 있으나, 이는 복잡한 물체를 실시간으로 처리하는 데 적합하지 않을 수 있습니다.
- 일부 연구에서는 경계 볼륨과 거리 필드를 결합한 하이브리드 접근법을 제안하여 이 문제를 해결하려고 시도했습니다.

**그래픽 하드웨어를 이용한 충돌 검출**

- 최근에는 그래픽 처리 장치(GPU)의 높은 연산 능력을 활용하여 충돌 검출을 가속화하는 방법이 개발되었습니다. 이러한 방법은 주로 단순한 형태의 객체나 특정한 경우에 제한적으로 적용됩니다.

**공간 분할 기법**

- 공간을 그리드나 BSP(Binary Space Partitioning)와 같은 구조로 나누어 충돌 검출을 수행하는 방법도 있습니다. 이 접근법은 효율적일 수 있지만, 구현이 복잡하거나 특정한 경우에만 적용되는 한계가 있을 수 있습니다.

이 논문은 공간 해싱을 사용하여 변형 가능한 사면체 메시의 충돌 검출을 수행하는 새로운 방법을 제안합니다. 이 방법은 기존의 그리드나 BSP와 같은 3D 데이터 구조를 사용하지 않으면서도 충돌 및 자기 충돌을 효율적으로 감지할 수 있는 장점이 있습니다.

매개변수 최적화를 통해 성능을 개선하고, 다양한 복잡도를 가진 물체에 대해 실시간 충돌 검출이 가능함을 보여줍니다.

## 3 Collision Detection Algorithm

이 알고리즘은 물리 기반 시뮬레이션에서 탄성 있는 물체들 사이의 충돌 및 자기 충돌을 감지하기 위해 고안되었습니다. 기본적으로, 이 방법은 공간을 작은 축에 정렬된 경계 상자(AABB)로 나누고, 이 공간 내에서 물체의 기본 요소(정점과 사면체)를 분류하여 충돌을 검출합니다. 다음은 알고리즘의 주요 단계입니다:

![사면체의 AABB에 의해 커버된 모든 그리드 셀에 대해 해시 값이 계산됩니다. 이 사면체는 이러한 해시 인덱스에서 발견된 모든 정점과의 교차 여부를 검사합니다.](Optimized%20Spatial%20Hashing%20for%20Collision%20Detection%20%2040e0c3ba0bc046a09c7c1e40e4f79b59/Untitled%201.png)

사면체의 AABB에 의해 커버된 모든 그리드 셀에 대해 해시 값이 계산됩니다. 이 사면체는 이러한 해시 인덱스에서 발견된 모든 정점과의 교차 여부를 검사합니다.

**공간의 암시적 분할**

- 3차원 공간(R3)을 작은 AABB로 나눕니다. 이 분할은 물체의 정점과 사면체가 어떤 AABB에 속하는지 분류하는 기반을 제공합니다.

**정점의 분류**

- 첫 번째 단계에서는 모든 물체의 정점을 해당하는 AABB(3D 셀)에 분류합니다. 이 과정은 정점이 있는 위치를 기반으로 합니다.

**사면체의 분류**

- 두 번째 단계에서는 모든 사면체를 같은 방법으로 3D 셀에 분류합니다. 사면체가 어떤 셀과 교차하는지 결정한 후, 해당 셀에 속하는 정점들과 사면체의 충돌 가능성을 검사합니다.

**충돌 검사**

- 실제 충돌 검사는 정점이 사면체 내부에 있는지를 확인하기 위해 바리센트릭 좌표를 계산합니다. 만약 정점이 사면체 내부에 있다면, 충돌이 감지된 것입니다.

**공간 해싱**

- 알고리즘은 공간 해싱 기법을 사용하여 각 3D 셀을 해시 테이블의 인덱스에 매핑합니다. 이 방법을 통해, 충돌 검사 대상이 되는 정점과 사면체를 효율적으로 식별할 수 있습니다.

**해시 함수와 해시 테이블**

- 해시 함수는 3D 셀의 위치를 기반으로 해시 테이블 내의 인덱스로 변환합니다. 이 인덱스에는 해당 위치에 속하는 물체의 기본 요소 정보가 저장됩니다.

**최적화된 매개변수**

- 알고리즘은 해시 테이블 크기와 셀 크기 같은 매개변수에 따라 성능이 달라집니다. 이러한 매개변수는 충돌 검출의 효율성을 최적화하기 위해 조정될 수 있습니다.

이 챕터는 제안된 충돌 검출 알고리즘의 기술적 세부 사항을 제공하며, 공간 해싱을 활용하여 물리 기반 시뮬레이션에서 탄성 있는 물체 간의 충돌 및 자기 충돌을 효율적으로 감지하는 방법을 설명합니다.

## 4 Parameters

이러한 매개변수들은 알고리즘의 효율성과 신뢰성을 결정하는 데 중요한 역할을 합니다. 주요 매개변수로는 해시 함수, 해시 테이블 크기, 그리드 셀 크기, 그리고 실제 교차 검사 방법이 포함됩니다. 각각의 매개변수는 아래와 같이 최적화되었습니다:

### **4.1 해시 함수**

해시 함수는 3차원 위치를 1차원 해시 테이블 인덱스로 변환하는 데 사용됩니다. 이 함수는 균일한 분포를 제공해야 하며, 해시 충돌을 최소화하기 위해 세심하게 선택되어야 합니다. 실험을 통해, 대규모 소수를 사용하는 해시 함수가 효과적임을 발견했습니다.

### **4.2 해시 테이블 크기**

해시 테이블의 크기는 알고리즘의 성능에 직접적인 영향을 미칩니다. 큰 해시 테이블은 해시 충돌의 가능성을 줄이지만, 메모리 관리에 더 많은 비용이 들 수 있습니다. 알고리즘은 충분히 큰 해시 테이블을 사용하여 효율성을 최대화하면서도 메모리 사용을 최적화합니다.

### **4.3 그리드 셀 크기**

공간 해싱에서 그리드 셀의 크기는 매우 중요한 매개변수입니다. 셀 크기는 해시 인덱스당 할당되는 물체의 기본 요소 수에 영향을 미칩니다. 너무 큰 셀은 교차 검사 시 많은 요소를 비교하게 하여 성능을 저하시키고, 너무 작은 셀은 불필요하게 많은 해시 인덱스를 생성합니다. 최적의 셀 크기는 사면체의 평균 가장자리 길이와 유사해야 합니다.

![전체 정점 수가 5898개이고 사면체 수가 20514개인 두 개의 변형 가능한 용기(그림 9 참조)에 대한 충돌 검출 알고리즘의 성능. 해시 테이블 크기는 99, 199, 299 등으로 변화합니다. 그리드 셀 크기는 모든 사면체의 평균 가장자리 길이로 설정됩니다(4.3절 참조).](Optimized%20Spatial%20Hashing%20for%20Collision%20Detection%20%2040e0c3ba0bc046a09c7c1e40e4f79b59/Untitled%202.png)

전체 정점 수가 5898개이고 사면체 수가 20514개인 두 개의 변형 가능한 용기(그림 9 참조)에 대한 충돌 검출 알고리즘의 성능. 해시 테이블 크기는 99, 199, 299 등으로 변화합니다. 그리드 셀 크기는 모든 사면체의 평균 가장자리 길이로 설정됩니다(4.3절 참조).

![ 전체 정점 수가 1200개이고 사면체 수가 1000개인 100개의 변형 가능한 물체(그림 8 참조)에 대한 충돌 검출 알고리즘의 성능. 해시 테이블 크기는 99, 199, 299 등으로 변화합니다. 그리드 셀 크기는 모든 사면체의 평균 가장자리 길이로 설정됩니다(4.3절 참조).](Optimized%20Spatial%20Hashing%20for%20Collision%20Detection%20%2040e0c3ba0bc046a09c7c1e40e4f79b59/Untitled%203.png)

 전체 정점 수가 1200개이고 사면체 수가 1000개인 100개의 변형 가능한 물체(그림 8 참조)에 대한 충돌 검출 알고리즘의 성능. 해시 테이블 크기는 99, 199, 299 등으로 변화합니다. 그리드 셀 크기는 모든 사면체의 평균 가장자리 길이로 설정됩니다(4.3절 참조).

![전체 정점 수가 5898개이고 사면체 수가 20514개인 두 개의 변형 가능한 용기(그림 9 참조)에 대한 충돌 검출 알고리즘의 성능. 그리드 셀 크기가 변화합니다. 해시 테이블 크기는 9973입니다.](Optimized%20Spatial%20Hashing%20for%20Collision%20Detection%20%2040e0c3ba0bc046a09c7c1e40e4f79b59/Untitled%204.png)

전체 정점 수가 5898개이고 사면체 수가 20514개인 두 개의 변형 가능한 용기(그림 9 참조)에 대한 충돌 검출 알고리즘의 성능. 그리드 셀 크기가 변화합니다. 해시 테이블 크기는 9973입니다.

![전체 정점 수가 1200개이고 사면체 수가 1000개인 100개의 변형 가능한 물체(그림 8 참조)에 대한 충돌 검출 알고리즘의 성능. 그리드 셀 크기가 변화합니다. 해시 테이블 크기는 4999입니다.](Optimized%20Spatial%20Hashing%20for%20Collision%20Detection%20%2040e0c3ba0bc046a09c7c1e40e4f79b59/Untitled%205.png)

전체 정점 수가 1200개이고 사면체 수가 1000개인 100개의 변형 가능한 물체(그림 8 참조)에 대한 충돌 검출 알고리즘의 성능. 그리드 셀 크기가 변화합니다. 해시 테이블 크기는 4999입니다.

### **4.4 교차 검사**

실제 교차 검사 방법은 정점이 사면체 내부에 있는지 판별하는 데 사용됩니다. 이 과정에서 바리센트릭 좌표를 계산하여 충돌을 검출합니다. 교차 검사의 효율성은 알고리즘의 전체적인 성능에 중요한 영향을 미칩니다.

챕터 4는 이러한 매개변수들이 어떻게 조정되고 최적화되어야 하는지에 대한 상세한 분석을 제공합니다. 이 최적화 과정을 통해, 물리 기반 시뮬레이션에서 다양한 복잡성을 가진 물체들 사이의 충돌 및 자기 충돌을 효과적으로 감지하고 처리할 수 있는 알고리즘의 성능을 향상시킬 수 있습니다.

## 5 Time Complexity

5번 챕터 "시간 복잡도"는 제안된 충돌 검출 알고리즘의 계산 효율성을 분석합니다. 시간 복잡도는 알고리즘을 실행하는 데 필요한 시간이 입력 크기에 따라 어떻게 증가하는지를 나타내는 개념입니다. 이 챕터는 알고리즘의 시간 복잡도가 선형이며, 따라서 큰 규모의 문제에도 효율적으로 적용될 수 있음을 설명합니다.

**기본적인 접근 방식**

- 전통적인 충돌 검출 방식은 모든 정점을 모든 사면체와 비교하여 충돌을 검출하는 방식입니다. 이 경우 시간 복잡도는 *O*(*n*2)로, 정점과 사면체의 수에 대해 제곱으로 증가합니다. 이는 입력 크기가 커짐에 따라 매우 비효율적이 됩니다.

**제안된 알고리즘의 접근 방식**

- 제안된 알고리즘은 공간을 작은 셀로 나누고, 해시 테이블을 이용해 효율적으로 충돌을 검출합니다. 이 접근 방식은 모든 정점과 사면체를 한 번씩만 처리하므로, 시간 복잡도가 *O*(*n*)으로 선형입니다. 즉, 처리해야 할 기본 요소의 수에 비례하여 시간이 증가합니다.

**선형 시간 복잡도의 중요성**

- 선형 시간 복잡도는 변형 알고리즘(물체가 시간에 따라 어떻게 변하는지를 계산하는 알고리즘)이 매 시간 단계마다 모든 물체를 처리해야 하는 상황에서 특히 중요합니다. 이런 경우, 충돌 검출 과정이 전체 시뮬레이션의 성능을 크게 저하시키지 않습니다.

**해시 테이블과 그리드 셀 크기의 영향**

- 해시 테이블의 구조와 그리드 셀의 크기 선택은 알고리즘의 성능에 큰 영향을 미칩니다. 적절히 선택된 매개변수는 해시 충돌을 최소화하고, 각 셀 내에서 검사해야 할 요소의 수를 적절히 유지함으로써, 전체적인 처리 시간을 줄일 수 있습니다.

제안된 충돌 검출 알고리즘은 그 구조 덕분에 효율적인 시간 복잡도를 가지며, 이는 다양한 크기와 복잡성을 가진 물체들 사이의 충돌을 실시간으로 감지하고 처리할 수 있는 능력을 의미합니다. 이러한 선형 시간 복잡도는 알고리즘을 실제 응용 프로그램에 적용할 때 매우 중요한 장점입니다.

## 6 Results

**실험 설정**

- 실험은 다양한 동적 변형이 적용된 물체들을 사용하여 수행되었습니다. 이는 알고리즘이 실시간으로 복잡한 형태의 물체들 사이의 충돌을 처리할 수 있는지를 검증하기 위함입니다.
- 실험된 설정에는 여러 개의 사면체로 구성된 다양한 물체들이 포함되었으며, 각각 다른 수의 사면체와 정점을 가지고 있습니다. 예를 들어, 물체가 100개의 사면체로 구성된 경우부터 50,000개의 사면체로 구성된 경우까지 다양합니다.
    
    ![Untitled](Optimized%20Spatial%20Hashing%20for%20Collision%20Detection%20%2040e0c3ba0bc046a09c7c1e40e4f79b59/Untitled%206.png)
    

![테스트 설정 A.](Optimized%20Spatial%20Hashing%20for%20Collision%20Detection%20%2040e0c3ba0bc046a09c7c1e40e4f79b59/Untitled%207.png)

테스트 설정 A.

![테스트 설정 B.](Optimized%20Spatial%20Hashing%20for%20Collision%20Detection%20%2040e0c3ba0bc046a09c7c1e40e4f79b59/Untitled%208.png)

테스트 설정 B.

![테스트 설정 D.](Optimized%20Spatial%20Hashing%20for%20Collision%20Detection%20%2040e0c3ba0bc046a09c7c1e40e4f79b59/Untitled%209.png)

테스트 설정 D.

![테스트 설정 D의 사면체 메시.](Optimized%20Spatial%20Hashing%20for%20Collision%20Detection%20%2040e0c3ba0bc046a09c7c1e40e4f79b59/Untitled%2010.png)

테스트 설정 D의 사면체 메시.

**실험 결과**

- 실험 결과는 충돌 검출 알고리즘의 처리 시간(평균, 최소, 최대, 표준 편차)을 다양한 설정에서 보여줍니다. 이를 통해, 알고리즘이 실제 시뮬레이션 환경에서 얼마나 잘 수행되는지를 평가할 수 있습니다.
- 예를 들어, 20,000개의 사면체와 6,000개의 정점을 가진 환경에서는 충돌 검출이 15Hz의 빈도로 실시간으로 수행될 수 있음을 보여줍니다. 이는 상당히 복잡한 시뮬레이션에서도 알고리즘이 효율적으로 작동할 수 있음을 의미합니다.
- 실험은 알고리즘의 성능이 물체의 수나 형태에 크게 의존하지 않고, 주로 처리해야 할 기본 요소(사면체와 정점)의 총 수에 의해 결정됨을 보여줍니다. 이는 알고리즘의 확장성과 범용성을 강조합니다.

**성능 평가**

- 알고리즘의 성능 평가는 다양한 기하학적 복잡성을 가진 물체들을 처리할 수 있는 능력을 입증합니다. 알고리즘은 높은 효율성과 신뢰성으로 충돌을 감지하며, 이는 게임, 시뮬레이션, 의료 시각화와 같은 여러 응용 분야에서의 사용 가능성을 시사합니다.

알고리즘이 실시간으로 복잡한 형태의 물체들 사이의 충돌을 처리할 수 있는 충분한 성능과 확장성을 가지고 있음을 입증합니다.

## 7 Discussion

제안된 충돌 검출 알고리즘의 장점과 한계를 심도 있게 분석합니다.

- **장점**: 제안된 알고리즘은 공간 해싱을 이용하여 효율적으로 물체 간의 충돌 및 자기 충돌을 감지합니다. 이 방식은 특히 동적으로 변형되는 물체들에 대한 실시간 충돌 검출에서 뛰어난 성능을 보여줍니다.
- **한계**: 알고리즘은 정점과 사면체의 충돌을 감지하는 데는 효과적이지만, 에지 간의 충돌은 직접적으로 처리하지 않습니다. 또한, 공간 해싱 방식은 해시 충돌을 완전히 피할 수 없으며, 이는 특정 상황에서 성능 저하를 초래할 수 있습니다.
- **개선 방안**: 미래 연구에서는 알고리즘의 정확도와 효율성을 더욱 향상시킬 수 있는 방법을 모색하고 있습니다. 특히, 에지 간의 충돌 처리와 해시 충돌을 줄이기 위한 방법 개발이 중요한 연구 주제입니다.

## 8 Ongoing Work

- **충돌 반응 처리**: 충돌 검출 다음 단계로, 충돌이 발생했을 때 물체들이 어떻게 반응할지를 모델링하는 것이 중요합니다. 연구팀은 충돌 반응 알고리즘을 개발하여 더 현실적인 시뮬레이션을 가능하게 하려고 합니다.
- **실시간 시뮬레이션 프레임워크 개발**: 효율적인 변형 모델과 충돌 검출 알고리즘을 통합하는 모듈러 프레임워크의 개발이 진행 중입니다. 이는 다양한 응용 프로그램, 예를 들어 게임이나 의료 시뮬레이션에서의 사용을 목표로 합니다.

## 9 Conclusion

- **알고리즘의 기여**: 제안된 충돌 검출 알고리즘은 동적으로 변형되는 물체들 사이의 충돌 및 자기 충돌을 효율적으로 감지하는 새로운 방법을 제시합니다. 이는 복잡한 형태의 물체들을 포함하는 실시간 시뮬레이션에서 특히 유용합니다.
- **성능**: 실험 결과는 알고리즘이 복잡한 시나리오에서도 충돌을 신속하고 정확하게 감지할 수 있음을 보여줍니다. 이는 알고리즘이 다양한 실시간 응용 분야에 적용될 수 있음을 의미합니다.
- **미래 연구 방향**: 충돌 반응 처리의 개선, 알고리즘의 정확도와 효율성 증가, 그리고 다양한 응용 분야로의 확장 등이 미래 연구의 중요한 방향입니다.