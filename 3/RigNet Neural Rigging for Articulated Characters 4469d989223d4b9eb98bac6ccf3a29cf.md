# RigNet: Neural Rigging for Articulated Characters

[https://zhan-xu.github.io/rig-net/](https://zhan-xu.github.io/rig-net/)

[https://github.com/zhan-xu/RigNet](https://github.com/zhan-xu/RigNet)

[https://www.youtube.com/watch?v=J90VETgWIDg&feature=youtu.be](https://www.youtube.com/watch?v=J90VETgWIDg&feature=youtu.be)

- 2020 Siggraph

## 1 INTRODUCTION

![
3D 캐릭터 메쉬가 주어지면, RigNet은 입력 캐릭터의 관절 구조에 맞춘 애니메이션 스켈레톤과 스키닝 가중치를 생성합니다. 왼쪽에서 오른쪽으로: 테스트 3D 메쉬의 입력 예시, 각 메쉬에 대해 예측된 스켈레톤(관절은 초록색, 뼈는 파란색으로 표시됨), 그리고 다양한 스켈레톤 포즈에서의 결과 스키닝 변형. 추가 비디오 자료는 [https://youtu.be/J90VETgWIDg](https://youtu.be/J90VETgWIDg) 를 참조하세요.](RigNet%20Neural%20Rigging%20for%20Articulated%20Characters%204469d989223d4b9eb98bac6ccf3a29cf/Untitled.png)

3D 캐릭터 메쉬가 주어지면, RigNet은 입력 캐릭터의 관절 구조에 맞춘 애니메이션 스켈레톤과 스키닝 가중치를 생성합니다. 왼쪽에서 오른쪽으로: 테스트 3D 메쉬의 입력 예시, 각 메쉬에 대해 예측된 스켈레톤(관절은 초록색, 뼈는 파란색으로 표시됨), 그리고 다양한 스켈레톤 포즈에서의 결과 스키닝 변형. 추가 비디오 자료는 [https://youtu.be/J90VETgWIDg](https://youtu.be/J90VETgWIDg) 를 참조하세요.

전통적으로는 사용자가 애니메이션 '스켈레톤'을 만들고 이를 입력 메쉬(또는 '스킨')에 결합하는 수작업 리깅이 사용되어 왔으며, 이는 30년 이상 활용된 방법입니다. 스켈레톤은 캐릭터의 관절 구조를 나타내며, 관절 회전을 통해 애니메이터가 캐릭터의 포즈를 계층적으로 제어할 수 있습니다.

이 논문에서는 입력된 3D 캐릭터로부터 자동으로 리깅을 생성하는 딥러닝 기반 솔루션을 제시합니다. 이 방법은 애니메이터의 기대에 부합하는 스켈레톤과 스키닝을 예측합니다. 기존 연구와 달리, 이 방법은 고정된 관절 수와 구조를 가진 사전 정의된 스켈레톤 템플릿을 사용하지 않으며, 입력된 3D 메쉬의 기본 관절 구조에 더 맞춰진 스켈레톤을 출력합니다. 또한, 이 접근법은 특정 형태나 고정된 스켈레톤 구조에 제한되지 않으며, 다양한 캐릭터를 리깅할 수 있는 일반적인 모델을 제공합니다.

단일 정적 3D 메쉬에서 애니메이션 스켈레톤과 스키닝을 예측하는 것은 야심찬 문제로, 애니메이터들은 캐릭터에 따라 크게 다른 관절 수와 토폴로지를 가진 스켈레톤을 생성합니다. 애니메이터는 또한 생물 해부학에 대한 암묵적인 이해를 스켈레톤에 반영합니다. 예를 들어, 스파인(척추)을 인간과 동물의 해부학을 모방하여 중앙선보다는 등쪽에 가깝게 배치하거나, 원통형 팔 구조에 비례하는 팔꿈치 관절을 도입하는 등입니다. 스키닝 가중치를 계산할 때도, 애니메이터는 구조를 매우 단단하거나 부드러운 것으로 인식합니다.

자동 리깅 접근법은 이러한 애니메이터의 직관을 캡처해야 하며, 이는 대규모의 다양한 리깅 모델을 학습할 수 있는 학습 접근법에 적합합니다. 그러나 애니메이터들이 입력 캐릭터의 스켈레톤 토폴로지와 관절 배치에 대해 대체로 동의하더라도, 관절 수와 정확한 배치에는 모호함이 존재합니다. 따라서 리깅 방법은 출력 스켈레톤의 세부 수준을 쉽게 제어할 수 있어야 합니다.

이러한 문제를 해결하기 위해 우리는 딥 모듈러 아키텍처를 설계했습니다. 첫 번째 모듈은 그래프 신경망으로, 입력 캐릭터의 관절 이동성을 포착하기 위해 적절한 관절 수와 위치를 예측합니다. 두 번째 모듈은 관절을 연결하는 계층적 트리 구조를 예측합니다. 마지막으로 세 번째 모듈은 각 메쉬 버텍스에 대해 스키닝 가중치를 예측하여 다양한 뼈로부터 받는 영향을 나타냅니다.

우리의 평가 결과, RigNet은 이전 방법들보다 정량적으로 우수하며, 정성적으로는 표현력이 풍부하고 애니메이션 준비가 된 리깅을 생성할 수 있음을 확인했습니다. 또한 다양한 알고리즘 선택이 출력 리깅에 미치는 영향을 평가했습니다. 이 논문의 기여는 자동화된 엔드투엔드 캐릭터 리깅 솔루션을 제시한 것입니다. 우리의 기술적 기여는 관절을 로컬라이즈하기 위한 신경 메쉬 주의 및 미분 가능 클러스터링 기법, 메쉬 표현 학습을 위한 그래프 신경망, 및 스켈레톤 관절의 연결성을 학습하는 네트워크를 포함합니다. 우리의 접근법은 기존의 기하학적 접근법과 학습 기반 접근법보다 훨씬 뛰어납니다.

![애니메이터가 만든 스켈레톤 예시들. 아래 행에서는 스키닝 가중치가 포함된 리깅된 달팽이를 보여줍니다.](RigNet%20Neural%20Rigging%20for%20Articulated%20Characters%204469d989223d4b9eb98bac6ccf3a29cf/Untitled%201.png)

애니메이터가 만든 스켈레톤 예시들. 아래 행에서는 스키닝 가중치가 포함된 리깅된 달팽이를 보여줍니다.

## 2 RELATED WORK

스켈레톤에 관해서는, 그래픽스와 비전에서 중요한 표현인 골격 구조는 메디얼 축 표현, 커빌리니어 표현, 메소스켈레톤, 조각 선형 구조 등 다양한 개념으로 나뉩니다. 특히 애니메이터 중심의 스켈레톤은 관절 형상을 포착하도록 설계되었습니다. 초기의 자동 리깅 접근법인 "Pinocchio"는 사전 정의된 스켈레톤 템플릿을 3D 모델에 맞추고 열 확산을 통해 스키닝을 수행했지만, 입력 형상이 템플릿과 호환되지 않을 경우 실패할 수 있었습니다. 이후 연구에서는 3D 포즈 추정 방식을 바탕으로 볼륨 네트워크를 학습하여 입력 3D 캐릭터로부터 스켈레톤을 생성하는 방법이 제안되었으나, 리깅 전용 메쉬로의 변환 과정에서 표면 특징을 잃거나 형상 토폴로지가 변경될 수 있다는 한계가 있었습니다.

피부 변형에 관한 연구는 물리 기반, 기하학적, 데이터 기반 접근법으로 나뉩니다. 물리 기반 방법은 정확하지만 계산 비용이 많이 들고, 기하학적 방법은 단순하고 효율적이지만 해부학적 고려 사항을 잘 반영하지 못합니다. 데이터 기반 접근법은 예시 시퀀스로부터 스키닝을 생성할 수 있습니다. 최근 "NeuroSkinning" 방법은 3D 캐릭터의 가족으로부터 스키닝을 학습하는 방식으로, 메쉬 이웃 간의 엣지 가중치를 학습하여 버텍스 특징을 계산합니다. 우리의 방법은 메쉬 및 지오데식 이웃 내에서 엣지 특징 표현을 학습하고 이를 버텍스 표현으로 결합합니다. 또한, 우리는 유클리드 거리 대신 지오데식 거리를 활용하여 형태 표현을 내재적으로 학습합니다.

그래프 신경망(GNN)은 그래프 처리 작업에 널리 사용되며, 최근에는 점 집합, 메쉬, 내재적 또는 스펙트럴 표현에 대한 기하학적 딥러닝에도 적용되고 있습니다. 우리의 그래프 신경망은 엣지 컨볼루션을 변형하여 메쉬 기반 및 지오데식 이웃 내에서 엣지 특징을 학습하고, 메쉬 토폴로지와 형태 기하학을 조합하여 버텍스 표현을 학습합니다.

이와 같은 다양한 이전 연구를 바탕으로, 우리는 더 나은 성능을 제공하고 애니메이터의 직관을 반영할 수 있는 통합 딥 아키텍처를 통해 캐릭터 리깅을 자동화하는 방법을 제안합니다.

![세 명의 다른 아티스트가 리깅한 모델들. 이들은 스켈레톤 레이아웃과 예상 관절에 대해 대체로 일치하지만, 관절 수와 전체 세부 수준에서는 차이가 있습니다.](RigNet%20Neural%20Rigging%20for%20Articulated%20Characters%204469d989223d4b9eb98bac6ccf3a29cf/Untitled%202.png)

세 명의 다른 아티스트가 리깅한 모델들. 이들은 스켈레톤 레이아웃과 예상 관절에 대해 대체로 일치하지만, 관절 수와 전체 세부 수준에서는 차이가 있습니다.

## 3 OVERVIEW

![상단: 우리의 방법의 파이프라인. (a) 입력된 3D 모델을 주면, 그래프 신경망(GMEdgeNet)이 버텍스를 이웃 관절 쪽으로 이동시킵니다. (b) 별도의 파라미터를 가진 또 다른 GMEdgeNet 모듈이 관절 예측에 더 관련 있는 영역을 나타내는 주의 함수를 예측합니다(더 붉은 값은 더 강한 주의를 나타내며, 이동된 버텍스도 주의에 따라 색상 표시됨). (c) 메쉬 주의에 따라 클러스터링 모듈이 관절을 감지하고 초록색 공으로 표시합니다. (d) 감지된 관절을 기반으로 신경 모듈(BoneNet, 그림 6 참조)이 각 관절 쌍의 연결 확률을 예측합니다. (e) 또 다른 모듈(RootNet)이 루트 관절을 추출합니다. (f) 최소 신장 트리(MST) 알고리즘이 BoneNet과 RootNet 출력을 사용하여 애니메이션 스켈레톤을 형성합니다. (g) 마지막으로 GMEdgeNet 모듈이 예측된 스켈레톤을 기반으로 스키닝 가중치를 출력합니다. 하단: GMEdgeNet의 아키텍처 및 그 그래프 컨볼루션 레이어(GMEdgeConv).](RigNet%20Neural%20Rigging%20for%20Articulated%20Characters%204469d989223d4b9eb98bac6ccf3a29cf/Untitled%203.png)

상단: 우리의 방법의 파이프라인. (a) 입력된 3D 모델을 주면, 그래프 신경망(GMEdgeNet)이 버텍스를 이웃 관절 쪽으로 이동시킵니다. (b) 별도의 파라미터를 가진 또 다른 GMEdgeNet 모듈이 관절 예측에 더 관련 있는 영역을 나타내는 주의 함수를 예측합니다(더 붉은 값은 더 강한 주의를 나타내며, 이동된 버텍스도 주의에 따라 색상 표시됨). (c) 메쉬 주의에 따라 클러스터링 모듈이 관절을 감지하고 초록색 공으로 표시합니다. (d) 감지된 관절을 기반으로 신경 모듈(BoneNet, 그림 6 참조)이 각 관절 쌍의 연결 확률을 예측합니다. (e) 또 다른 모듈(RootNet)이 루트 관절을 추출합니다. (f) 최소 신장 트리(MST) 알고리즘이 BoneNet과 RootNet 출력을 사용하여 애니메이션 스켈레톤을 형성합니다. (g) 마지막으로 GMEdgeNet 모듈이 예측된 스켈레톤을 기반으로 스키닝 가중치를 출력합니다. 하단: GMEdgeNet의 아키텍처 및 그 그래프 컨볼루션 레이어(GMEdgeConv).

입력된 3D 메쉬 캐릭터로부터 애니메이션 스켈레톤과 스키닝을 예측하는 우리의 방법에 대해 개략적으로 설명합니다. 이 방법은 딥 아키텍처를 기반으로 하며, 스켈레톤과 스키닝 가중치는 애니메이터가 추가로 편집할 수 있는 기본 요소로 제공됩니다. 우리의 아키텍처는 입력 캐릭터의 클래스, 부위 구조 또는 스켈레톤 관절 카테고리를 사전에 알 필요가 없으며, 훈련 및 테스트 중에 일관된 정면 및 직립 방향을 유지하는 가정만 합니다.

### Skeletal Joint Prediction (관절 예측)

첫 번째 모듈은 관절 위치를 예측합니다. 이를 위해 메쉬 기하학을 후보 관절 위치로 이동시키는 그래프 신경망을 사용합니다. 중요한 개념은 신경 메쉬 주의 기능을 통해 관절을 로컬라이즈할 수 있는 표면 영역을 강조하는 것입니다. 이 과정에서 메쉬 기하학이 후보 관절 위치 주변에 모이게 되고, 신경 메쉬 주의를 사용하는 차별화된 클러스터링 방식으로 관절 위치를 추출합니다. 애니메이션 스켈레톤의 세부 수준은 사용자 입력을 통해 조절할 수 있습니다.

### Skeleton Connectivity Prediction (스켈레톤 연결 예측)

두 번째 모듈은 예측된 관절 간의 연결 관계를 학습하여 애니메이션 스켈레톤을 구성합니다. 이 모듈은 이전 단계에서 예측된 관절을 입력으로 받아, 각 관절 쌍이 뼈로 연결될 확률을 출력합니다. 이 확률을 기반으로 최소 신장 트리 알고리즘을 사용하여 루트 관절에서 시작하여 가장 가능성이 높은 뼈를 우선적으로 연결하여 트리 구조의 스켈레톤을 생성합니다. 루트 관절은 또 다른 신경 모듈을 통해 선택됩니다.

### Skinning Prediction (스키닝 예측)

마지막 모듈은 각 메쉬 버텍스에 대해 스키닝 가중치를 예측합니다. 이 과정은 주어진 스켈레톤을 바탕으로 버텍스가 여러 뼈로부터 받는 영향을 나타내는 가중치 벡터를 생성합니다. 우리의 방법은 Neuroskinning에서 영감을 받았지만, 중요한 차이점으로는 아키텍처, 뼈와 형태 표현, 그리고 유클리드 거리 대신 지오데식 거리를 사용하는 점 등이 있습니다.

### Training and Generalization (훈련 및 일반화)

우리의 아키텍처는 관절 위치, 뼈 연결성 및 스키닝 가중치 차이를 측정하는 손실 함수를 결합하여 훈련됩니다. 훈련 데이터셋은 다양한 구조, 관절 수, 이동 부위를 가진 캐릭터들로 구성되어 있으며, 테스트 데이터셋 역시 유사하게 다양합니다. 우리의 방법은 서로 다른 관절 수와 이동 부위를 가진 캐릭터들에 대해 일반화할 수 있습니다.

### 종합

우리의 방법은 입력된 3D 메쉬 캐릭터로부터 자동으로 애니메이션 스켈레톤과 스키닝을 생성할 수 있는 통합된 딥 아키텍처를 제공합니다. 이 방법은 애니메이터가 추가로 편집할 수 있는 기본 요소로 제공되어 다양한 애니메이션 작업에 적용될 수 있습니다.

## 4 METHOD

![예측된 스켈레톤의 세부 수준 또는 구체성을 제어하는 밴드폭 파라미터 증가의 효과.](RigNet%20Neural%20Rigging%20for%20Articulated%20Characters%204469d989223d4b9eb98bac6ccf3a29cf/Untitled%204.png)

예측된 스켈레톤의 세부 수준 또는 구체성을 제어하는 밴드폭 파라미터 증가의 효과.

입력된 3D 모델을 자동으로 리깅하는 아키텍처는 세 가지 주요 단계로 구성되어 있으며, 각 단계는 그래프 신경망을 사용하여 수행됩니다.

### 4.1 Joint Prediction (관절 예측)

첫 번째 단계는 입력된 메쉬로부터 관절 위치를 예측하는 것입니다. 이 단계는 두 부분으로 나뉩니다.

1. **Regression (회귀):** 그래프 신경망을 사용하여 메쉬 버텍스를 후보 관절 위치로 이동시킵니다. 이 과정에서 메쉬의 형태와 기하학적 특징을 학습하여 각 버텍스의 이동을 예측합니다. 또한, 신경 메쉬 주의 메커니즘을 통해 각 버텍스가 관절 위치를 나타낼 가능성을 나타내는 주의 맵을 생성합니다.
2. **Clustering (클러스터링):** 이동된 버텍스들을 기반으로 밀도 기반 클러스터링을 사용하여 관절 위치를 추출합니다. 이 과정에서 각 버텍스의 주의 값이 클러스터링에 반영되어 더 정확한 관절 위치를 예측할 수 있습니다.

사용자는 출력 스켈레톤의 세부 수준을 조절할 수 있는 옵션을 가지며, 대칭적인 3D 캐릭터의 경우 양측 관절을 반영하여 예측을 더욱 정교하게 만듭니다.

### 4.2 Connectivity Prediction (연결 예측)

두 번째 단계는 예측된 관절을 연결하여 애니메이션 스켈레톤을 구성하는 것입니다.

![BoneNet 아키텍처.](RigNet%20Neural%20Rigging%20for%20Articulated%20Characters%204469d989223d4b9eb98bac6ccf3a29cf/Untitled%205.png)

BoneNet 아키텍처.

1. **BoneNet:** 이 모듈은 관절 쌍의 연결 가능성을 예측합니다. 입력된 메쉬와 관절 정보를 사용하여 각 관절 쌍이 뼈로 연결될 확률을 출력합니다. 이 과정에서 전반적인 형태 기하학과 스켈레톤 기하학을 반영하여 보다 정확한 예측을 수행합니다.
2. **Minimum Spanning Tree (최소 신장 트리):** 예측된 관절 연결 확률을 기반으로 최소 신장 트리 알고리즘을 사용하여 최적의 트리 구조 스켈레톤을 생성합니다. 루트 관절은 별도의 신경망 모듈을 통해 예측됩니다.

![왼쪽: 우리의 방법으로 감지된 관절. 루트 관절은 빨간색으로 표시됩니다. 가운데: 유클리드 거리(edge cost)를 기준으로 Prim 알고리즘을 사용해 생성된 스켈레톤. 오른쪽: BoneNet 확률의 음의 로그를 비용으로 사용하여 생성된 스켈레톤.](RigNet%20Neural%20Rigging%20for%20Articulated%20Characters%204469d989223d4b9eb98bac6ccf3a29cf/Untitled%206.png)

왼쪽: 우리의 방법으로 감지된 관절. 루트 관절은 빨간색으로 표시됩니다. 가운데: 유클리드 거리(edge cost)를 기준으로 Prim 알고리즘을 사용해 생성된 스켈레톤. 오른쪽: BoneNet 확률의 음의 로그를 비용으로 사용하여 생성된 스켈레톤.

### 4.3 Skinning Prediction (스키닝 예측)

세 번째 단계는 예측된 스켈레톤을 기반으로 각 메쉬 버텍스의 스키닝 가중치를 예측하는 것입니다.

1. **Skeleton-aware Mesh Representation:** 각 메쉬 버텍스가 스켈레톤에 대해 가지는 공간적 관계를 나타내는 특징 벡터를 생성합니다. 이를 위해 각 버텍스와 뼈 사이의 지오데식 거리를 계산하고, 버텍스 위치와 뼈의 위치를 특징 벡터로 결합합니다.
2. **Skinning Module:** 그래프 신경망을 사용하여 각 버텍스의 스키닝 가중치를 예측합니다. 이 모듈은 버텍스와 뼈의 지오데식 거리를 활용하여 보다 정확한 스키닝 가중치를 생성합니다.

### Training and Generalization (훈련 및 일반화)

우리의 아키텍처는 관절 위치, 뼈 연결성, 스키닝 가중치 차이를 측정하는 여러 손실 함수를 결합하여 훈련됩니다. 각 단계의 네트워크 매개변수는 대규모 리깅된 캐릭터 데이터셋을 사용하여 학습됩니다.

### 종합

우리의 방법은 입력된 3D 메쉬 캐릭터로부터 자동으로 애니메이션 스켈레톤과 스키닝을 생성하는 통합된 딥 아키텍처를 제안합니다. 이 방법은 사용자가 원하는 세부 수준을 조절할 수 있으며, 다양한 캐릭터에 대해 일반화할 수 있는 강력한 성능을 제공합니다.

## 5 TRAINING

### 5.1 Joint Prediction Stage Training (관절 예측 단계 훈련)

이 단계에서는 관절 위치를 정확하게 예측하기 위해 두 가지 주요 손실 함수를 사용합니다.

1. **Chamfer Distance Loss (챔퍼 거리 손실):** 이동된 버텍스와 실제 관절 위치 간의 대칭적인 챔퍼 거리를 최소화합니다. 이는 각 이동된 버텍스가 실제 관절 위치에 얼마나 가까운지를 측정하며, 클러스터링 과정에서 정확한 관절 위치를 찾을 수 있도록 합니다.
2. **Vertex Displacement Supervision (버텍스 이동 감독):** 이동된 버텍스와 실제 관절 위치 간의 거리 차이를 최소화하여 클러스터링 이전에 버텍스가 정확하게 이동하도록 돕습니다.

또한, 주의 맵(Attention Map)을 통한 감독 학습을 추가하여 관절 위치를 더 정확하게 예측할 수 있도록 합니다. 이러한 접근 방식은 주의 메커니즘을 통해 버텍스의 중요도를 학습하여 더 정확한 관절 위치를 제공합니다.

### 5.2 Connectivity Stage Training (연결 단계 훈련)

이 단계에서는 예측된 관절 간의 연결성을 학습합니다.

1. **Binary Cross-Entropy Loss (이진 교차 엔트로피 손실):** 실제 관절 연결성과 예측된 연결성 간의 이진 교차 엔트로피를 최소화하여 관절 쌍이 연결될 확률을 정확하게 예측합니다.
2. **Root Joint Prediction (루트 관절 예측):** 루트 관절을 선택하는 네트워크의 매개변수를 학습하기 위해 소프트맥스 손실을 사용하여 정확한 루트 관절을 예측합니다.

연결 단계 훈련에서는 연결 확률을 기반으로 최소 신장 트리를 생성하여 최적의 스켈레톤 구조를 형성합니다.

### 5.3 Skinning Stage Training (스키닝 단계 훈련)

이 단계에서는 각 메쉬 버텍스의 스키닝 가중치를 예측합니다.

1. **Cross-Entropy Loss (교차 엔트로피 손실):** 예측된 스키닝 가중치 벡터와 실제 스키닝 가중치 벡터 간의 교차 엔트로피를 최소화하여 각 버텍스의 스키닝 가중치를 정확하게 예측합니다.

훈련 데이터셋은 다양한 구조, 관절 수, 이동 부위를 가진 캐릭터들로 구성되어 있으며, 각 단계의 네트워크 매개변수는 이러한 데이터셋을 사용하여 학습됩니다.

### Training Implementation Details (훈련 구현 세부 사항)

훈련 과정에서는 Adam 옵티마이저를 사용하여 각 단계의 네트워크 매개변수를 학습합니다. 배치 크기와 학습률은 각 단계별로 다르게 설정되며, 모델의 성능을 최적화하기 위해 하드 예제 마이닝 및 엣지 드롭아웃과 같은 기법을 사용합니다.

### 종합

우리의 아키텍처는 다양한 손실 함수를 결합하여 관절 예측, 연결성 예측 및 스키닝 예측을 위한 네트워크 매개변수를 학습합니다. 이를 통해 입력된 3D 메쉬 캐릭터로부터 자동으로 애니메이션 스켈레톤과 스키닝을 생성할 수 있습니다.

## 6 RESULTS

![스켈레톤 추출에 대한 이전 방법들과의 비교. 각 캐릭터에 대해, 왼쪽에 참조 스켈레톤("애니메이터가 만든")이 표시됩니다. 우리의 예측은 참조 스켈레톤과 더 일치하는 경향이 있습니다.](RigNet%20Neural%20Rigging%20for%20Articulated%20Characters%204469d989223d4b9eb98bac6ccf3a29cf/Untitled%207.png)

스켈레톤 추출에 대한 이전 방법들과의 비교. 각 캐릭터에 대해, 왼쪽에 참조 스켈레톤("애니메이터가 만든")이 표시됩니다. 우리의 예측은 참조 스켈레톤과 더 일치하는 경향이 있습니다.

![스키닝에 대한 이전 방법들과의 비교. 스키닝 가중치, L1 오류 맵, 및 다른 포즈(위의 로봇의 오른팔 이동, 아래의 캐릭터의 턱 내림)를 시각화합니다. 우리의 방법은 평균적으로 스키닝 가중치 예측에서 더 낮은 오류를 생성합니다.](RigNet%20Neural%20Rigging%20for%20Articulated%20Characters%204469d989223d4b9eb98bac6ccf3a29cf/Untitled%208.png)

스키닝에 대한 이전 방법들과의 비교. 스키닝 가중치, L1 오류 맵, 및 다른 포즈(위의 로봇의 오른팔 이동, 아래의 캐릭터의 턱 내림)를 시각화합니다. 우리의 방법은 평균적으로 스키닝 가중치 예측에서 더 낮은 오류를 생성합니다.

![다양한 구조와 형태를 가진 테스트 모델들에 대한 예측된 스켈레톤. 우리의 방법은 훈련에 사용된 것들과 다른 수나 유형의 부품을 가진 모델에서도 합리적인 스켈레톤을 생성할 수 있습니다(예: 세 개의 꼬리를 가진 네발 동물).](RigNet%20Neural%20Rigging%20for%20Articulated%20Characters%204469d989223d4b9eb98bac6ccf3a29cf/Untitled%209.png)

다양한 구조와 형태를 가진 테스트 모델들에 대한 예측된 스켈레톤. 우리의 방법은 훈련에 사용된 것들과 다른 수나 유형의 부품을 가진 모델에서도 합리적인 스켈레톤을 생성할 수 있습니다(예: 세 개의 꼬리를 가진 네발 동물).

### Dataset (데이터셋)

우리는 3D 아티큘레이트 캐릭터로 구성된 "ModelsResource-RigNetv1" 데이터셋을 사용하여 우리의 방법을 훈련하고 테스트했습니다. 이 데이터셋은 2703개의 리깅된 캐릭터를 포함하며, 훈련, 검증, 테스트 데이터셋으로 각각 80%, 10%, 10% 비율로 나뉩니다. 이 데이터셋은 다양한 카테고리의 캐릭터들로 구성되어 있으며, 중복된 모델이나 리메쉬된 버전은 제거되었습니다.

### Quantitative Evaluation Measures (정량적 평가 지표)

우리는 예측된 애니메이션 스켈레톤과 스키닝이 테스트 셋의 레퍼런스 스켈레톤과 스키닝과 얼마나 유사한지 평가하기 위해 여러 지표를 사용했습니다.

### Skeleton Evaluation (스켈레톤 평가)

1. **Chamfer Distance (CD-J2J, CD-J2B, CD-B2B):** 예측된 관절과 뼈의 위치를 기준으로 레퍼런스 스켈레톤과의 거리를 측정합니다.
2. **Intersection over Union (IoU):** 예측된 관절과 레퍼런스 관절 간의 일치 비율을 측정합니다.
3. **Precision & Recall:** 예측된 관절과 레퍼런스 관절 간의 정확도와 재현율을 평가합니다.
4. **Tree Edit Distance (ED):** 예측된 스켈레톤과 레퍼런스 스켈레톤의 구조적 차이를 측정합니다.

### Skinning Evaluation (스키닝 평가)

1. **Precision & Recall:** 각 버텍스에 대해 예측된 스키닝 가중치와 레퍼런스 스키닝 가중치의 일치 비율을 측정합니다.
2. **L1-norm:** 예측된 스키닝 가중치 벡터와 레퍼런스 가중치 벡터 간의 L1-norm 차이를 계산합니다.
3. **Vertex Deformation Distance (dist):** 예측된 스키닝을 사용하여 변형된 버텍스의 위치와 레퍼런스 스키닝을 사용한 위치 간의 유클리드 거리를 측정합니다.

### Comparisons (비교)

우리의 방법은 기존 방법들보다 모든 평가 지표에서 더 우수한 성능을 보였습니다.

1. **Skeleton Prediction:** 우리의 방법은 Pinocchio와 Xu et al. (2019)의 방법보다 더 정확한 스켈레톤을 예측했습니다.
2. **Skinning Prediction:** 우리의 방법은 Bounded-Biharmonic Weights (BBW), NeuroSkinning, GeoVoxel 방법보다 더 정확한 스키닝 가중치를 예측했습니다.

### Qualitative Results (정성적 결과)

비주얼 비교에서도 우리의 방법이 더 정확한 스켈레톤과 스키닝을 생성함을 확인할 수 있었습니다. 예를 들어, 우리의 방법은 팔, 다리, 얼굴 등의 부위에서 더 정확한 관절 위치와 스키닝 가중치를 예측하여, 애니메이션 시 더 자연스러운 움직임을 제공합니다.

### Ablation Study (소거 연구)

우리의 아키텍처에서 각 구성 요소의 중요성을 평가하기 위해 소거 연구를 수행했습니다.

1. **Joint Prediction Ablation:** 주의 메커니즘, 버텍스 이동 감독, 지오데식 이웃 등을 제거한 경우 성능이 저하됨을 확인했습니다.
2. **Connectivity Prediction Ablation:** 글로벌 형태 기하학, 스켈레톤 기하학, 관절 쌍의 특징 표현을 제거한 경우 성능이 저하됨을 확인했습니다.
3. **Skinning Prediction Ablation:** 볼류메트릭 지오데식 거리 특징을 제거한 경우 성능이 저하됨을 확인했습니다.

![우리 네트워크에서 사용된 가장 가까운 뼈의 수에 따른 스키닝 가중치 오류.](RigNet%20Neural%20Rigging%20for%20Articulated%20Characters%204469d989223d4b9eb98bac6ccf3a29cf/Untitled%2010.png)

우리 네트워크에서 사용된 가장 가까운 뼈의 수에 따른 스키닝 가중치 오류.

### 종합

우리의 방법은 입력된 3D 메쉬 캐릭터로부터 자동으로 애니메이션 스켈레톤과 스키닝을 생성하는 데 있어 기존 방법들보다 우수한 성능을 보입니다. 다양한 정량적 및 정성적 평가를 통해 우리의 접근법이 더 정확하고 자연스러운 결과를 제공함을 확인할 수 있었습니다.

## 7 LIMITATIONS AND CONCLUSION

![실패 사례. (상단:) 팔에 여분의 관절이 있는 경우. (하단:) 옷을 위한 헬퍼 관절이 누락된 경우.](RigNet%20Neural%20Rigging%20for%20Articulated%20Characters%204469d989223d4b9eb98bac6ccf3a29cf/Untitled%2011.png)

실패 사례. (상단:) 팔에 여분의 관절이 있는 경우. (하단:) 옷을 위한 헬퍼 관절이 누락된 경우.

### Limitations (제한점)

우리의 방법은 여러 가지 면에서 유용하지만, 몇 가지 제한점과 향후 연구 방향을 고려해야 합니다.

1. **단계별 훈련 접근법:** 현재의 방법은 단계별 훈련을 통해 각 모듈을 학습합니다. 이상적으로는 스키닝 손실이 모든 단계를 통해 역전파되어 관절 예측을 개선할 수 있어야 하지만, 이는 지오데식 거리와 스켈레톤 구조 예측을 차별화하는 어려움이 있습니다.
2. **메쉬 해상도 및 연결성:** 우리의 방법은 다양한 버텍스 샘플링과 테셀레이션에 더 강인하도록 훈련되었으나, 메쉬 해상도와 연결성에 대한 완전한 불변성을 보장하지는 않습니다. 여기서 다른 메쉬 신경망(예: 스펙트럴 방식)을 탐구하는 것이 효과적일 수 있습니다.
3. **불필요한 관절:** 드물지만, 우리 방법은 추가적인 관절을 생성하는 등 불필요한 효과를 발생시킬 수 있습니다. 예를 들어, 팔에 불필요한 관절을 생성할 수 있습니다.
4. **제한된 데이터셋:** 우리의 데이터셋은 모델당 하나의 리그만을 포함하며, 많은 리그가 작은 부위(예: 발, 손가락, 의류 및 액세서리)에 대한 뼈를 포함하지 않아서 이런 관절을 예측하는 데 한계가 있습니다. 데이터셋을 더 풍부하게 하여 성능을 향상시킬 수 있지만, 이는 현재보다 더 다중 모달일 수 있습니다.
5. **다중 해상도 접근법:** 현재의 방법은 하나의 밴드폭 파라미터만 탐색하지만, 더 풍부한 스켈레톤 형태와 해상도를 제공하는 상호작용적 제어를 탐구하는 것도 유익한 연구 방향이 될 수 있습니다.

### Conclusion (결론)

우리는 입력된 3D 캐릭터 모델을 자동으로 리깅하는 방법을 제안했습니다. 이는 딥러닝 기반의 완전한 솔루션으로, 애니메이션 스켈레톤 생성과 스키닝 가중치 예측을 포함합니다. 우리의 방법은 다음과 같은 다양한 시나리오에서 실용적일 수 있습니다:

1. **일반 사용자 및 초보자:** 복잡한 모델링 및 리깅 인터페이스를 다루는 데 익숙하지 않은 일반 사용자나 초보자에게 유용합니다.
2. **3D 콘텐츠 제작의 민주화:** 현대 게임 엔진에서 제공하는 온라인 자산 라이브러리를 통해 3D 콘텐츠 제작 및 애니메이션의 민주화에 기여할 수 있습니다.
3. **대규모 3D 캐릭터 리깅:** 많은 3D 캐릭터를 리깅해야 하는 경우, 수작업으로 모델을 처리하는 것은 번거로울 수 있으며, 우리의 방법이 이를 자동화하여 시간을 절약할 수 있습니다.

### 향후 연구 방향

향후 연구 방향으로는 다음과 같은 개선이 있을 수 있습니다:

1. **통합 훈련 접근법:** 스키닝 손실을 모든 단계로 역전파하여 관절 예측을 개선하는 방법을 연구할 수 있습니다.
2. **메쉬 해상도 및 연결성 불변성:** 메쉬 해상도와 연결성에 대한 완전한 불변성을 보장하는 방법을 탐구할 수 있습니다.
3. **다중 해상도 접근법:** 더 풍부한 스켈레톤 형태와 해상도를 제공하는 상호작용적 제어를 탐구할 수 있습니다.
4. **포인트 클라우드 처리:** 우리의 방법을 포인트 클라우드 인식 또는 재구성 작업에 적용할 수 있는 가능성을 탐구할 수 있습니다.